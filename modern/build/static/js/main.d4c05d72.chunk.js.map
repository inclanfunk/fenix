{"version":3,"sources":["store/session.js","store/devices.js","store/positions.js","store/index.js","common/localization.js","RemoveDialog.js","EditCollectionView.js","reactHelper.js","DevicesList.js","MainToolbar.js","map/mapStyles.js","map/MapView.js","config.js","map/switcher/switcher.js","common/deviceCategories.js","map/mapUtil.js","common/preferences.js","map/Map.js","map/SelectedDeviceMap.js","map/AccuracyMap.js","map/GeofenceMap.js","common/formatter.js","map/StatusView.js","map/PositionsMap.js","map/CurrentPositionsMap.js","map/CurrentLocationMap.js","MainPage.js","LoginPage.js","RegisterPage.js","reports/ReportFilter.js","reports/ReportLayoutPage.js","reports/RouteReportPage.js","attributes/AddAttributeDialog.js","attributes/EditAttributesView.js","attributes/deviceAttributes.js","attributes/userAttributes.js","admin/ServerPage.js","admin/UsersPage.js","EditItemView.js","form/SelectField.js","form/LinkField.js","common/stringUtils.js","DevicePage.js","UserPage.js","SocketController.js","settings/NotificationsPage.js","settings/NotificationPage.js","settings/GroupsPage.js","settings/GroupPage.js","PositionPage.js","reports/EventReportPage.js","map/ReplayPathMap.js","reports/ReplayPage.js","reports/TripReportPage.js","reports/StopReportPage.js","reports/SummaryReportPage.js","App.js","serviceWorker.js","index.js"],"names":["createSlice","name","initialState","server","user","reducers","updateServer","state","action","payload","updateUser","reducer","actions","items","selectedId","refresh","forEach","item","update","select","id","remove","combineReducers","session","devices","positions","configureStore","supportedLanguages","data","af","ar","az","bg","bn","cs","de","da","el","en","es","fa","fi","fr","he","hi","hr","hu","it","ja","ka","kk","km","languages","undefined","window","navigator","slice","language","userLanguage","push","substring","i","length","replace","selectedLanguage","key","RemoveDialog","open","endpoint","itemId","onResult","handleRemove","a","fetch","method","ok","Dialog","onClose","DialogContent","DialogContentText","t","DialogActions","Button","color","onClick","autoFocus","useStyles","makeStyles","theme","fab","position","bottom","spacing","right","EditCollectionView","content","editPath","classes","history","useHistory","useState","setSelectedId","selectedAnchorEl","setSelectedAnchorEl","removeDialogShown","setRemoveDialogShown","Date","now","updateTimestamp","setUpdateTimestamp","menuHide","Content","onMenuClick","anchorId","Fab","size","className","Menu","anchorEl","MenuItem","useEffectAsync","effect","deps","useEffect","list","maxHeight","overflow","icon","width","height","filter","DeviceView","dispatch","useDispatch","useSelector","Object","values","response","devicesActions","json","List","map","index","ListItem","button","ListItemAvatar","Avatar","src","category","alt","ListItemText","primary","secondary","uniqueId","ListItemSecondaryAction","IconButton","event","currentTarget","Divider","DevicesList","flex","flexGrow","appBar","zIndex","drawer","menuButton","marginLeft","marginRight","MainToolbar","setDrawer","adminEnabled","administrator","userId","closeDrawer","handleLogout","sessionActions","AppBar","Toolbar","Typography","variant","Drawer","tabIndex","role","onKeyDown","ListItemIcon","subheader","ListSubheader","disabled","styleMapbox","style","MapView","this","container","document","createElement","mapboxContainer","appendChild","mapList","mapboxgl","Map","version","sources","osm","type","tiles","attribution","glyphs","layers","source","windyContainer","eventName","eventListener","on","control","controlContainer","onAdd","loaded","resize","hasImage","option","addImage","styleId","SwitcherControl","styles","defaultStyle","beforeSwitch","afterSwitch","onDocumentClick","bind","mapView","me","classList","add","mapStyleContainer","styleButton","addEventListener","display","addStyleItemButton","indent","styleElement","innerText","title","dataset","uri","JSON","stringify","target","srcElement","contains","console","log","getCenter","getElementById","visibility","dispatchEvent","CustomEvent","detail","zoom","getZoom","center","accessToken","config","setStyle","parse","elms","getElementsByClassName","s","parentNode","removeEventListener","removeChild","deviceCategories","loadImage","url","Promise","imageLoaded","image","Image","onload","loadIcon","background","pixelRatio","devicePixelRatio","canvas","context","getContext","drawImage","imageWidth","imageHeight","getImageData","reverseCoordinates","Array","isArray","Number","isNaN","coordinates","useAttributePreference","defaultValue","forceSettings","attributes","getMap","ready","readyListeners","Set","updateReadyValue","value","listener","initMap","all","imageData","addControl","setMap","setTimeout","waiting","children","containerEl","useRef","mapReady","setMapReady","mapboxAccessToken","script","async","body","addReadyListener","delete","removeReadyListener","useLayoutEffect","currentEl","current","getContainer","ref","SelectedDeviceMap","mapCenter","longitude","latitude","easeTo","AccuracyMap","features","accuracy","circle","addSource","e","addLayer","removeLayer","removeSource","getSource","setData","GeofenceMap","geofences","setGeofences","wellknown","area","geometry","properties","formatPosition","moment","format","toFixed","formatNumber","formatBoolean","precision","formatDate","formatDistance","unit","formatSpeed","formatVolume","formatHours","duration","humanize","StatusView","deviceId","onShowDetails","device","status","speed","course","totalDistance","batteryLevel","href","preventDefault","PositionsMap","createFeature","onMouseEnter","getCanvas","cursor","onMouseLeave","onClickCallback","useCallback","feature","Math","abs","lngLat","lng","placeholder","ReactDOM","render","store","positionId","Popup","offset","anchor","setDOMContent","setLngLat","addTo","from","off","CurrentPositionsMap","CurrentLocationMap","GeolocateControl","positionOptions","enableHighAccuracy","timeout","trackUserLocation","removeControl","root","flexDirection","breakpoints","down","drawerPaper","up","mapContainer","withWidth","React","openDevicesList","setState","isWidthUp","toggleDevicesList","aria-label","margin","top","left","paddingLeft","opacity","paper","marginTop","alignItems","padding","logo","buttons","justifyContent","flexBasis","textAlign","LoginPage","failed","setFailed","email","setEmail","password","setPassword","handleLogin","URLSearchParams","Paper","gutterBottom","marginBottom","onSubmit","TextField","required","fullWidth","error","label","autoComplete","onChange","helperText","FormControl","Link","RegisterPage","setName","handleRegister","headers","ReportFilter","handleSubmit","showOnly","setDeviceId","period","setPeriod","subtract","setFrom","to","setTo","handleClick","mail","selectedFrom","selectedTo","startOf","endOf","accept","toISOString","Accept","InputLabel","Select","HTML5_FMT","DATETIME_LOCAL","ButtonGroup","orientation","form","ReportLayoutPage","ReportFilterForm","reportFilterForm","setItems","Grid","xs","md","lg","query","toString","contentType","get","location","URL","blob","createObjectURL","assign","RouteReportPage","TableContainer","component","Table","TableHead","TableRow","TableCell","TableBody","AddAttributeDialog","definitions","createFilterOptions","options","entries","setKey","setType","maxWidth","Autocomplete","_","filterOptions","params","filtered","inputValue","getOptionLabel","renderOption","freeSolo","renderInput","addButton","removeButton","EditAttributesView","setAttributes","addDialogShown","setAddDialogShown","updateAttribute","updatedAttributes","deleteAttribute","getAttributeName","definition","getAttributeType","booleanList","otherList","concat","convertToList","direction","justify","FormControlLabel","Checkbox","checked","FilledInput","endAdornment","InputAdornment","startIcon","details","ServerPage","setItem","updatedItem","handleSave","goBack","Container","Accordion","defaultExpanded","AccordionSummary","expandIcon","AccordionDetails","announcement","registration","readonly","deviceReadonly","limitCommands","userAttributes","deviceAttributes","columnAction","UsersView","UsersPage","EditItemView","useParams","SelectField","multiple","keyGetter","titleGetter","LinkField","endpointAll","endpointLinked","baseId","keyBase","keyLink","linked","setLinked","createBody","linkId","oldValue","newValue","includes","added","removed","prefixString","prefix","charAt","toUpperCase","DevicePage","groupId","phone","model","contact","c","UserPage","connect","authenticated","connectSocket","protocol","socket","WebSocket","host","onclose","onmessage","positionsActions","events","displayNotifications","Notification","permission","notification","close","requestPermission","NotificationsView","formatList","split","Boolean","join","always","alarms","notificators","NotificationsPage","NotificationPage","predicate","startsWith","keys","toLowerCase","GroupsView","GroupsPage","GroupPage","PositionPage","formatKey","combinedList","attributesList","eventTypes","setEventTypes","append","EventReportPage","ReplayPathMap","bounds","reduce","extend","LngLatBounds","fitBounds","controlPanel","transform","controlContent","configForm","TimeLabel","Tooltip","enterTouchDelay","placement","ReplayPage","expanded","setExpanded","setPositions","setIndex","Slider","max","step","marks","valueLabelDisplay","valueLabelFormat","ValueLabelComponent","align","TripReportPage","distanceUnit","speedUnit","startTime","startOdometer","endTime","endOdometer","distance","averageSpeed","maxSpeed","StopReportPage","engineHours","spentFuel","daily","setDaily","SummaryReportPage","App","initialized","CssBaseline","exact","path","MainPage","LinearProgress","isLocalhost","hostname","match","registerValidSW","swUrl","serviceWorker","register","then","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","process","origin","indexOf","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.d4c05d72.chunk.js","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\r\n\r\nconst { reducer, actions } = createSlice({\r\n  name: 'session',\r\n  initialState: {\r\n    server: null,\r\n    user: null,\r\n  },\r\n  reducers: {\r\n    updateServer(state, action) {\r\n      state.server = action.payload;\r\n    },\r\n    updateUser(state, action) {\r\n      state.user = action.payload;\r\n    },\r\n  },\r\n});\r\n\r\nexport { actions as sessionActions };\r\nexport { reducer as sessionReducer };\r\n","import { createSlice } from '@reduxjs/toolkit';\r\n\r\nconst { reducer, actions } = createSlice({\r\n  name: 'devices',\r\n  initialState: {\r\n    items: {},\r\n    selectedId: null\r\n  },\r\n  reducers: {\r\n    refresh(state, action) {\r\n      state.items = {};\r\n      action.payload.forEach(item => state.items[item['id']] = item);\r\n    },\r\n    update(state, action) {\r\n      action.payload.forEach(item => state.items[item['id']] = item);\r\n    },\r\n    select(state, action) {\r\n      state.selectedId = action.payload.id;\r\n    },\r\n    remove(state, action) {\r\n      delete state.items[action.payload];\r\n    },\r\n  }\r\n});\r\n\r\nexport { actions as devicesActions };\r\nexport { reducer as devicesReducer };\r\n","import { createSlice } from '@reduxjs/toolkit';\r\n\r\nconst { reducer, actions } = createSlice({\r\n  name: 'positions',\r\n  initialState: {\r\n    items: {},\r\n  },\r\n  reducers: {\r\n    update(state, action) {\r\n      action.payload.forEach(item => state.items[item['deviceId']] = item);\r\n    },\r\n  }\r\n});\r\n\r\nexport { actions as positionsActions };\r\nexport { reducer as positionsReducer };\r\n","import { combineReducers, configureStore } from '@reduxjs/toolkit';\r\n\r\nimport { sessionReducer as session } from './session';\r\nimport { devicesReducer as devices } from './devices';\r\nimport { positionsReducer as positions } from './positions';\r\n\r\nconst reducer = combineReducers({\r\n  session,\r\n  devices,\r\n  positions,\r\n});\r\n\r\nexport { sessionActions } from './session';\r\nexport { devicesActions } from './devices';\r\nexport { positionsActions } from './positions';\r\n\r\nexport default configureStore({ reducer });\r\n","import af from '../../../web/l10n/af.json';\r\nimport ar from '../../../web/l10n/ar.json';\r\nimport az from '../../../web/l10n/az.json';\r\nimport bg from '../../../web/l10n/bg.json';\r\nimport bn from '../../../web/l10n/bn.json';\r\nimport cs from '../../../web/l10n/cs.json';\r\nimport da from '../../../web/l10n/da.json';\r\nimport de from '../../../web/l10n/de.json';\r\nimport el from '../../../web/l10n/el.json';\r\nimport en from '../../../web/l10n/en.json';\r\nimport es from '../../../web/l10n/es.json';\r\nimport fa from '../../../web/l10n/fa.json';\r\nimport fi from '../../../web/l10n/fi.json';\r\nimport fr from '../../../web/l10n/fr.json';\r\nimport he from '../../../web/l10n/he.json';\r\nimport hi from '../../../web/l10n/hi.json';\r\nimport hr from '../../../web/l10n/hr.json';\r\nimport hu from '../../../web/l10n/hu.json';\r\nimport id from '../../../web/l10n/id.json';\r\nimport it from '../../../web/l10n/it.json';\r\nimport ja from '../../../web/l10n/ja.json';\r\nimport ka from '../../../web/l10n/ka.json';\r\nimport kk from '../../../web/l10n/kk.json';\r\nimport km from '../../../web/l10n/km.json';\r\nimport ko from '../../../web/l10n/ko.json';\r\nimport lo from '../../../web/l10n/lo.json';\r\nimport lt from '../../../web/l10n/lt.json';\r\nimport lv from '../../../web/l10n/lv.json';\r\nimport ml from '../../../web/l10n/ml.json';\r\nimport ms from '../../../web/l10n/ms.json';\r\nimport nb from '../../../web/l10n/nb.json';\r\nimport ne from '../../../web/l10n/ne.json';\r\nimport nl from '../../../web/l10n/nl.json';\r\nimport nn from '../../../web/l10n/nn.json';\r\nimport pl from '../../../web/l10n/pl.json';\r\nimport pt from '../../../web/l10n/pt.json';\r\nimport pt_BR from '../../../web/l10n/pt_BR.json';\r\nimport ro from '../../../web/l10n/ro.json';\r\nimport ru from '../../../web/l10n/ru.json';\r\nimport si from '../../../web/l10n/si.json';\r\nimport sk from '../../../web/l10n/sk.json';\r\nimport sl from '../../../web/l10n/sl.json';\r\nimport sq from '../../../web/l10n/sq.json';\r\nimport sr from '../../../web/l10n/sr.json';\r\nimport sv from '../../../web/l10n/sv.json';\r\nimport ta from '../../../web/l10n/ta.json';\r\nimport th from '../../../web/l10n/th.json';\r\nimport tr from '../../../web/l10n/tr.json';\r\nimport uk from '../../../web/l10n/uk.json';\r\nimport uz from '../../../web/l10n/uz.json';\r\nimport vi from '../../../web/l10n/vi.json';\r\nimport zh from '../../../web/l10n/zh.json';\r\nimport zh_TW from '../../../web/l10n/zh_TW.json';\r\n\r\nconst supportedLanguages = {\r\n  'af': { data: af, name: 'Afrikaans' },\r\n  'ar': { data: ar, name: 'العربية' },\r\n  'az': { data: az, name: 'Azərbaycanca' },\r\n  'bg': { data: bg, name: 'Български' },\r\n  'bn': { data: bn, name: 'বাংলা' },\r\n  'cs': { data: cs, name: 'Čeština' },\r\n  'de': { data: de, name: 'Deutsch' },\r\n  'da': { data: da, name: 'Dansk' },\r\n  'el': { data: el, name: 'Ελληνικά' },\r\n  'en': { data: en, name: 'English' },\r\n  'es': { data: es, name: 'Español' },\r\n  'fa': { data: fa, name: 'فارسی' },\r\n  'fi': { data: fi, name: 'Suomi' },\r\n  'fr': { data: fr, name: 'Français' },\r\n  'he': { data: he, name: 'עברית' },\r\n  'hi': { data: hi, name: 'हिन्दी' },\r\n  'hr': { data: hr, name: 'Hrvatski' },\r\n  'hu': { data: hu, name: 'Magyar' },\r\n  'id': { data: id, name: 'Bahasa Indonesia' },\r\n  'it': { data: it, name: 'Italiano' },\r\n  'ja': { data: ja, name: '日本語' },\r\n  'ka': { data: ka, name: 'ქართული' },\r\n  'kk': { data: kk, name: 'Қазақша' },\r\n  'ko': { data: ko, name: '한국어' },\r\n  'km': { data: km, name: 'ភាសាខ្មែរ' },\r\n  'lo': { data: lo, name: 'ລາວ' },\r\n  'lt': { data: lt, name: 'Lietuvių' },\r\n  'lv': { data: lv, name: 'Latviešu' },\r\n  'ml': { data: ml, name: 'മലയാളം' },\r\n  'ms': { data: ms, name: 'بهاس ملايو' },\r\n  'nb': { data: nb, name: 'Norsk bokmål' },\r\n  'ne': { data: ne, name: 'नेपाली' },\r\n  'nl': { data: nl, name: 'Nederlands' },\r\n  'nn': { data: nn, name: 'Norsk nynorsk' },\r\n  'pl': { data: pl, name: 'Polski' },\r\n  'pt': { data: pt, name: 'Português' },\r\n  'pt_BR': { data: pt_BR, name: 'Português (Brasil)' },\r\n  'ro': { data: ro, name: 'Română' },\r\n  'ru': { data: ru, name: 'Русский' },\r\n  'si': { data: si, name: 'සිංහල' },\r\n  'sk': { data: sk, name: 'Slovenčina' },\r\n  'sl': { data: sl, name: 'Slovenščina' },\r\n  'sq': { data: sq, name: 'Shqipëria' },\r\n  'sr': { data: sr, name: 'Srpski' },\r\n  'sv': { data: sv, name: 'Svenska' },\r\n  'ta': { data: ta, name: 'தமிழ்' },\r\n  'th': { data: th, name: 'ไทย' },\r\n  'tr': { data: tr, name: 'Türkçe' },\r\n  'uk': { data: uk, name: 'Українська' },\r\n  'uz': { data: uz, name: 'Oʻzbekcha' },\r\n  'vi': { data: vi, name: 'Tiếng Việt' },\r\n  'zh': { data: zh, name: '中文' },\r\n  'zh_TW': { data: zh_TW, name: '中文 (Taiwan)' }\r\n};\r\n\r\nconst languages = window.navigator.languages !== undefined ? window.navigator.languages.slice() : [];\r\nlet language = window.navigator.userLanguage || window.navigator.language;\r\nlanguages.push(language);\r\nlanguages.push(language.substring(0, 2));\r\nlanguages.push('en');\r\nfor (let i = 0; i < languages.length; i++) {\r\n  language = languages[i].replace('-', '_');\r\n  if (language in supportedLanguages) {\r\n    break;\r\n  }\r\n  if (language.length > 2) {\r\n    language = languages[i].substring(0, 2);\r\n    if (language in supportedLanguages) {\r\n      break;\r\n    }\r\n  }\r\n}\r\n\r\nconst selectedLanguage = supportedLanguages[language];\r\n\r\nexport const findStringKeys = (predicate) => {\r\n  return Object.keys(selectedLanguage.data).filter(predicate);\r\n}\r\n\r\nexport default key => {\r\n  return selectedLanguage.data[key];\r\n};\r\n","import t from './common/localization'\r\nimport React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\n\r\nconst RemoveDialog = ({ open, endpoint, itemId, onResult }) => {\r\n  const handleRemove = async () => {\r\n    const response = await fetch(`/api/${endpoint}/${itemId}`, { method: 'DELETE' });\r\n    if (response.ok) {\r\n      onResult(true);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={() => { onResult(false) }}>\r\n      <DialogContent>\r\n        <DialogContentText>{t('sharedRemoveConfirm')}</DialogContentText>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button color=\"primary\" onClick={handleRemove}>{t('sharedRemove')}</Button>\r\n        <Button autoFocus onClick={() => onResult(false)}>{t('sharedCancel')}</Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default RemoveDialog;\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useHistory } from 'react-router-dom';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport AddIcon from '@material-ui/icons/Add';\r\n\r\nimport t from './common/localization';\r\nimport RemoveDialog from './RemoveDialog';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  fab: {\r\n    position: 'absolute',\r\n    bottom: theme.spacing(2),\r\n    right: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst EditCollectionView = ({ content, editPath, endpoint }) => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const [selectedId, setSelectedId] = useState(null);\r\n  const [selectedAnchorEl, setSelectedAnchorEl] = useState(null);\r\n  const [removeDialogShown, setRemoveDialogShown] = useState(false);\r\n  const [updateTimestamp, setUpdateTimestamp] = useState(Date.now());\r\n\r\n  const menuShow = (anchorId, itemId) => {\r\n    setSelectedAnchorEl(anchorId);\r\n    setSelectedId(itemId);\r\n  }\r\n\r\n  const menuHide = () => {\r\n    setSelectedAnchorEl(null);\r\n  }\r\n\r\n  const handleAdd = () => {\r\n    history.push(editPath);\r\n    menuHide();\r\n  }\r\n\r\n  const handleEdit = () => {\r\n    history.push(`${editPath}/${selectedId}`);\r\n    menuHide();\r\n  }\r\n\r\n  const handleRemove = () => {\r\n    setRemoveDialogShown(true);\r\n    menuHide();\r\n  }\r\n\r\n  const handleRemoveResult = () => {\r\n    setRemoveDialogShown(false);\r\n    setUpdateTimestamp(Date.now());\r\n  }\r\n\r\n  const Content = content;\r\n\r\n  return (\r\n    <>\r\n      <Content updateTimestamp={updateTimestamp} onMenuClick={menuShow} />\r\n      <Fab size=\"medium\" color=\"primary\" className={classes.fab} onClick={handleAdd}>\r\n        <AddIcon />\r\n      </Fab>\r\n      <Menu open={!!selectedAnchorEl} anchorEl={selectedAnchorEl} onClose={menuHide}>\r\n        <MenuItem onClick={handleEdit}>{t('sharedEdit')}</MenuItem>\r\n        <MenuItem onClick={handleRemove}>{t('sharedRemove')}</MenuItem>\r\n      </Menu>\r\n      <RemoveDialog open={removeDialogShown} endpoint={endpoint} itemId={selectedId} onResult={handleRemoveResult} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default EditCollectionView;\r\n","\r\nimport { useRef, useEffect } from 'react';\r\n\r\nexport const usePrevious = value => {\r\n  const ref = useRef();\r\n  useEffect(() => {\r\n    ref.current = value;\r\n  });\r\n  return ref.current;\r\n};\r\n\r\nexport const useEffectAsync = (effect, deps) => {\r\n  useEffect(() => {\r\n    effect();\r\n  }, deps); // eslint-disable-line react-hooks/exhaustive-deps\r\n};\r\n","import React, { Fragment } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\n\r\nimport { devicesActions } from './store';\r\nimport EditCollectionView from './EditCollectionView';\r\nimport { useEffectAsync } from './reactHelper';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  list: {\r\n    maxHeight: '100%',\r\n    overflow: 'auto',\r\n  },\r\n  icon: {\r\n    width: '25px',\r\n    height: '25px',\r\n    filter: 'brightness(0) invert(1)',\r\n  },\r\n}));\r\n\r\nconst DeviceView = ({ updateTimestamp, onMenuClick }) => {\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n\r\n  const items = useSelector(state => Object.values(state.devices.items));\r\n\r\n  useEffectAsync(async () => {\r\n    const response = await fetch('/api/devices');\r\n    if (response.ok) {\r\n      dispatch(devicesActions.refresh(await response.json()));\r\n    }\r\n  }, [updateTimestamp]);\r\n\r\n  return (\r\n    <List className={classes.list}>\r\n      {items.map((item, index, list) => (\r\n        <Fragment key={item.id}>\r\n          <ListItem button key={item.id} onClick={() => dispatch(devicesActions.select(item))}>\r\n            <ListItemAvatar>\r\n              <Avatar>\r\n                <img className={classes.icon} src={`images/icon/${item.category || 'default'}.svg`} alt=\"\" />\r\n              </Avatar>\r\n            </ListItemAvatar>\r\n            <ListItemText primary={item.name} secondary={item.uniqueId} />\r\n            <ListItemSecondaryAction>\r\n              <IconButton onClick={(event) => onMenuClick(event.currentTarget, item.id)}>\r\n                <MoreVertIcon />\r\n              </IconButton>\r\n            </ListItemSecondaryAction>\r\n          </ListItem>\r\n          {index < list.length - 1 ? <Divider /> : null}\r\n        </Fragment>\r\n      ))}\r\n    </List>\r\n  );\r\n}\r\n\r\nconst DevicesList = () => {\r\n  return (\r\n    <EditCollectionView content={DeviceView} editPath=\"/device\" endpoint=\"devices\" />\r\n  );\r\n}\r\n\r\nexport default DevicesList;\r\n","import React, { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { sessionActions } from './store';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport List from '@material-ui/core/List';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport MapIcon from '@material-ui/icons/Map';\r\nimport BarChartIcon from '@material-ui/icons/BarChart';\r\nimport PeopleIcon from '@material-ui/icons/People';\r\nimport StorageIcon from '@material-ui/icons/Storage';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport NotificationsIcon from '@material-ui/icons/Notifications';\r\nimport TimelineIcon from '@material-ui/icons/Timeline';\r\nimport PauseCircleFilledIcon from '@material-ui/icons/PauseCircleFilled';\r\nimport PlayCircleFilledIcon from '@material-ui/icons/PlayCircleFilled';\r\nimport NotificationsActiveIcon from '@material-ui/icons/NotificationsActive';\r\nimport FormatListBulletedIcon from '@material-ui/icons/FormatListBulleted';\r\nimport TrendingUpIcon from '@material-ui/icons/TrendingUp';\r\nimport FolderIcon from '@material-ui/icons/Folder';\r\nimport ReplayIcon from '@material-ui/icons/Replay';\r\nimport t from './common/localization';\r\n\r\n// import DevicesList from './DevicesList';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  flex: {\r\n    flexGrow: 1\r\n  },\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n  },\r\n  list: {\r\n    width: 250\r\n  },\r\n  menuButton: {\r\n    marginLeft: -12,\r\n    marginRight: 20,\r\n  },\r\n}));\r\n\r\nconst MainToolbar = () => {\r\n  const dispatch = useDispatch();\r\n  const [drawer, setDrawer] = useState(false);\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const adminEnabled = useSelector(state => state.session.user && state.session.user.administrator);\r\n  const userId = useSelector(state => state.session.user && state.session.user.id);\r\n\r\n  const openDrawer = () => { setDrawer(true) }\r\n  const closeDrawer = () => { setDrawer(false) }\r\n\r\n  const handleLogout = async () => {\r\n    const response = await fetch('/api/session', { method: 'DELETE' });\r\n    if (response.ok) {\r\n      dispatch(sessionActions.updateUser(null));\r\n      history.push('/login');\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <AppBar position=\"static\" className={classes.appBar}>\r\n        <Toolbar>\r\n          <IconButton\r\n            className={classes.menuButton}\r\n            color=\"inherit\"\r\n            onClick={openDrawer}>\r\n            <MenuIcon />\r\n          </IconButton>\r\n          <Typography variant=\"h6\" color=\"inherit\" className={classes.flex}>\r\n            Geolynx\r\n          </Typography>\r\n          <Button color=\"inherit\" onClick={handleLogout}>{t('loginLogout')}</Button>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <Drawer open={drawer} onClose={closeDrawer}>\r\n        <div\r\n          tabIndex={0}\r\n          className={classes.list}\r\n          role=\"button\"\r\n          onClick={closeDrawer}\r\n          onKeyDown={closeDrawer}>\r\n\r\n          {/* <DevicesList /> */}\r\n          <List>\r\n            <ListItem button onClick={() => history.push('/')}>\r\n              <ListItemIcon>\r\n                <MapIcon />\r\n              </ListItemIcon>\r\n              <ListItemText primary={t('mapTitle')} />\r\n            </ListItem>\r\n            <ListItem button onClick={() => history.push('/replay')}>\r\n              <ListItemIcon>\r\n                <ReplayIcon />\r\n              </ListItemIcon>\r\n              <ListItemText primary={t('reportReplay')} />\r\n            </ListItem>\r\n          </List>\r\n          <Divider />\r\n          <List\r\n            subheader={\r\n              <ListSubheader>\r\n                {t('reportTitle')}\r\n              </ListSubheader>\r\n            }>\r\n            <ListItem button onClick={() => history.push('/reports/route')}>\r\n              <ListItemIcon>\r\n                <TimelineIcon />\r\n              </ListItemIcon>\r\n              <ListItemText primary={t('reportRoute')} />\r\n            </ListItem>\r\n            <ListItem button onClick={() => history.push('/reports/event')}>\r\n              <ListItemIcon>\r\n                <NotificationsActiveIcon />\r\n              </ListItemIcon>\r\n              <ListItemText primary={t('reportEvents')} />\r\n            </ListItem>\r\n            <ListItem button onClick={() => history.push('/reports/trip')}>\r\n              <ListItemIcon>\r\n                <PlayCircleFilledIcon />\r\n              </ListItemIcon>\r\n              <ListItemText primary={t('reportTrips')} />\r\n            </ListItem>\r\n            <ListItem button onClick={() => history.push('/reports/stop')}>\r\n              <ListItemIcon>\r\n                <PauseCircleFilledIcon />\r\n              </ListItemIcon>\r\n              <ListItemText primary={t('reportStops')} />\r\n            </ListItem>\r\n            <ListItem button onClick={() => history.push('/reports/summary')}>\r\n              <ListItemIcon>\r\n                <FormatListBulletedIcon />\r\n              </ListItemIcon>\r\n              <ListItemText primary={t('reportSummary')} />\r\n            </ListItem>\r\n            <ListItem button disabled>\r\n              <ListItemIcon>\r\n                <TrendingUpIcon />\r\n              </ListItemIcon>\r\n              <ListItemText primary={t('reportChart')} />\r\n            </ListItem>\r\n          </List>\r\n          <Divider />\r\n          <List\r\n            subheader={\r\n              <ListSubheader>\r\n                {t('settingsTitle')}\r\n              </ListSubheader>\r\n            }>\r\n            <ListItem button disabled={!userId} onClick={() => history.push(`/user/${userId}`)}>\r\n              <ListItemIcon>\r\n                <PersonIcon />\r\n              </ListItemIcon>\r\n              <ListItemText primary={t('settingsUser')} />\r\n            </ListItem>\r\n            <ListItem button onClick={() => history.push('/settings/notifications')}>\r\n              <ListItemIcon>\r\n                <NotificationsIcon />\r\n              </ListItemIcon>\r\n              <ListItemText primary={t('sharedNotifications')} />\r\n            </ListItem>\r\n            <ListItem button onClick={() => history.push('/settings/groups')}>\r\n              <ListItemIcon>\r\n                <FolderIcon />\r\n              </ListItemIcon>\r\n              <ListItemText primary={t('settingsGroups')} />\r\n            </ListItem>\r\n          </List>\r\n          {adminEnabled && (\r\n            <>\r\n              <Divider />\r\n              <List\r\n                subheader={\r\n                  <ListSubheader>\r\n                    {t('userAdmin')}\r\n                  </ListSubheader>\r\n                }>\r\n                <ListItem button onClick={() => history.push('/admin/server')}>\r\n                  <ListItemIcon>\r\n                    <StorageIcon />\r\n                  </ListItemIcon>\r\n                  <ListItemText primary={t('settingsServer')} />\r\n                </ListItem>\r\n                <ListItem button onClick={() => history.push('/admin/users')}>\r\n                  <ListItemIcon>\r\n                    <PeopleIcon />\r\n                  </ListItemIcon>\r\n                  <ListItemText primary={t('settingsUsers')} />\r\n                </ListItem>\r\n                <ListItem button disabled>\r\n                  <ListItemIcon>\r\n                    <BarChartIcon />\r\n                  </ListItemIcon>\r\n                  <ListItemText primary={t('statisticsTitle')} />\r\n                </ListItem>\r\n              </List>\r\n            </>\r\n          )}\r\n        </div>\r\n      </Drawer>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default MainToolbar;\r\n","export const styleCustom = (url, attribution) => ({\r\n  version: 8,\r\n  sources: {\r\n    osm: {\r\n      type: 'raster',\r\n      tiles: [url],\r\n      attribution: attribution,\r\n    },\r\n  },\r\n  glyphs: 'https://cdn.traccar.com/map/fonts/{fontstack}/{range}.pbf',\r\n  layers: [{\r\n    id: 'osm',\r\n    type: 'raster',\r\n    source: 'osm',\r\n  }],\r\n});\r\n\r\nexport const styleOsm = () => styleCustom(\r\n  'https://tile.openstreetmap.org/{z}/{x}/{y}.png',\r\n  '© <a target=\"_top\" rel=\"noopener\" href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\r\n);\r\n\r\nexport const styleCarto = () => ({\r\n  'version': 8,\r\n  'sources': {\r\n    'raster-tiles': {\r\n      'type': 'raster',\r\n      'tiles': [\r\n          'https://a.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}@2x.png',\r\n          'https://b.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}@2x.png',\r\n          'https://c.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}@2x.png',\r\n          'https://d.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}@2x.png'\r\n      ],\r\n      'tileSize': 256,\r\n      'attribution': '© <a target=\"_top\" rel=\"noopener\" href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, © <a target=\"_top\" rel=\"noopener\" href=\"https://carto.com/attribution\">CARTO</a>'\r\n    }\r\n  },\r\n  'glyphs': 'https://cdn.traccar.com/map/fonts/{fontstack}/{range}.pbf',\r\n  'layers': [\r\n    {\r\n      'id': 'simple-tiles',\r\n      'type': 'raster',\r\n      'source': 'raster-tiles',\r\n      'minzoom': 0,\r\n      'maxzoom': 22,\r\n    }\r\n  ]\r\n});\r\n\r\nexport const styleMapbox = (style) => `mapbox://styles/inclanfunk/${style}`;\r\n\r\nexport const styleMapTiler = (style, key) => `https://api.maptiler.com/maps/${style}/style.json?key=${key}`;\r\n","import mapboxgl from 'mapbox-gl';\nimport {styleOsm} from './mapStyles';\n\n\nexport default class MapView {\n    constructor () {\n        this.container = document.createElement('div');        \n        this.container.style.width = '100%';\n        this.container.style.height = '100%';\n        this.container.style.position = 'relative';\n\n        this.mapboxContainer = document.createElement('div');\n        this.mapboxContainer.id = 'mapbox';\n        this.mapboxContainer.style.width = '100%';\n        this.mapboxContainer.style.height = '100%';\n\n        this.container.appendChild(this.mapboxContainer);\n\n        this.mapList = {\n            'mapbox' : new mapboxgl.Map({\n                container: this.mapboxContainer,\n                style: styleOsm(),\n            })\n        }\n\n        this.windyContainer = document.createElement('div');\n        this.windyContainer.id = 'windy';\n        this.windyContainer.style.width = '100%';\n        this.windyContainer.style.height = '100%';\n\n        this.container.appendChild(this.windyContainer); \n\n        this.map = this.mapList['mapbox'];\n    }\n\n    getMap() {\n        return this.map;\n    }\n\n    getContainer() {\n        return this.container;\n    }\n\n    on(eventName, eventListener) {\n        this.map.on(eventName, eventListener);\n    }\n\n    addControl(control) {\n        const controlContainer = control.onAdd(this)\n        this.container.appendChild(controlContainer);\n    }\n\n    loaded() {\n        return this.map.loaded();\n    }\n\n    resize() {\n        this.map.resize();\n    }\n\n    hasImage(name) {\n        return this.map.hasImage(name);\n    }\n\n    addImage(name, data, option) {\n        this.map.addImage(name, data, option);\n    }\n\n    setMap(styleId) {\n        this.map = this.mapList['mapbox'];\n    }\n}\n","export default {\n    MAPBOX_ACCESS_TOKEN: 'pk.eyJ1IjoiaW5jbGFuZnVuayIsImEiOiJja2dlNnM3MGIwNm4zMnlwaHo3M3J2bzU4In0.LUlcK4IiLIEY_ssxmzXgKQ'\n}\n","import mapboxgl from 'mapbox-gl';\r\nimport config from '../../config'\r\nexport class SwitcherControl {\r\n\r\n  constructor(styles, defaultStyle, beforeSwitch, afterSwitch) {\r\n    this.styles = styles;\r\n    this.defaultStyle = defaultStyle;\r\n    this.beforeSwitch = beforeSwitch;\r\n    this.afterSwitch = afterSwitch;\r\n    this.onDocumentClick = this.onDocumentClick.bind(this);\r\n  }\r\n\r\n  getDefaultPosition() {\r\n    return 'top-right';\r\n  }\r\n\r\n  onAdd(mapView) {\r\n    const me = this;\r\n    me.controlContainer = document.createElement('div');\r\n    me.controlContainer.classList.add('mapboxgl-ctrl');\r\n    me.controlContainer.classList.add('mapboxgl-ctrl-group');\r\n    me.controlContainer.classList.add('mapboxgl-ctrl-top-right');\r\n    me.controlContainer.style.zIndex = 50000;\r\n\r\n    me.mapStyleContainer = document.createElement('div');\r\n    me.mapStyleContainer.classList.add('mapboxgl-style-list');\r\n    me.controlContainer.appendChild(me.mapStyleContainer);\r\n\r\n    me.styleButton = document.createElement('button');\r\n    me.styleButton.type = 'button';\r\n    me.styleButton.classList.add('mapboxgl-ctrl-icon');\r\n    me.styleButton.classList.add('mapboxgl-style-switcher');\r\n    me.styleButton.addEventListener('click', () => {\r\n      me.styleButton.style.display = 'none';\r\n      me.mapStyleContainer.style.display = 'block';\r\n    });\r\n\r\n    const addStyleItemButton = (style, indent) => {\r\n      const styleElement = document.createElement('button');\r\n      styleElement.type = 'button';\r\n      styleElement.innerText = style.title;\r\n      styleElement.classList.add(style.title.replace(/[^a-z0-9-]/gi, '_'));\r\n      if (indent) styleElement.classList.add('indent');\r\n      styleElement.dataset.uri = JSON.stringify(style.uri);\r\n      styleElement.dataset.id = style.id;\r\n      styleElement.addEventListener('click', event => {\r\n        const styleId = event.target.dataset.id;\r\n        if (!styleId) return; // If parent menu then just return;\r\n\r\n        me.beforeSwitch();\r\n        \r\n        const srcElement = event.srcElement;\r\n        if (srcElement.classList.contains('active')) {\r\n          return;\r\n        }\r\n\r\n        if (styleId === 'mapWinds' || styleId === 'mapTemperatures') {console.log(mapView.map.getCenter())\r\n          // Windy map\r\n          document.getElementById('windy').style.visibility = 'visible';\r\n          document.getElementById('mapbox').style.visibility = 'hidden';\r\n\r\n          document.dispatchEvent(new CustomEvent('changeMapStyle', {\r\n            detail: {\r\n              styleId: styleId,\r\n              zoom: mapView.map.getZoom(),\r\n              center: mapView.map.getCenter()\r\n            }\r\n          }));\r\n        } else {\r\n          // Mapbox map\r\n          document.getElementById('windy').style.visibility = 'hidden';\r\n          document.getElementById('mapbox').style.visibility = 'visible';             \r\n          \r\n          mapboxgl.accessToken = config.MAPBOX_ACCESS_TOKEN;\r\n          mapView.map.setStyle(JSON.parse(srcElement.dataset.uri));          \r\n        }\r\n        me.afterSwitch();\r\n        me.mapStyleContainer.style.display = 'none';\r\n        me.styleButton.style.display = 'block';\r\n        const elms = me.mapStyleContainer.getElementsByClassName('active');\r\n        while (elms[0]) {\r\n          elms[0].classList.remove('active');\r\n        }\r\n        srcElement.classList.add('active');\r\n      });\r\n\r\n      if (style.id === me.defaultStyle) {\r\n        styleElement.classList.add('active');\r\n      }\r\n      me.mapStyleContainer.appendChild(styleElement);\r\n    }\r\n\r\n    for (const style of me.styles) {\r\n      addStyleItemButton(style);\r\n\r\n      if (style.items) {\r\n        for (const s of style.items) {console.log(s)\r\n          addStyleItemButton(s, true);\r\n        }\r\n      }\r\n    }\r\n    me.controlContainer.appendChild(me.styleButton);\r\n    \r\n    document.addEventListener('click', me.onDocumentClick);\r\n    return me.controlContainer;\r\n  }\r\n\r\n  onRemove() {\r\n    if (!this.controlContainer || !this.controlContainer.parentNode || !this.map || !this.styleButton) {\r\n      return;\r\n    }\r\n    this.styleButton.removeEventListener('click', this.onDocumentClick);\r\n    this.controlContainer.parentNode.removeChild(this.controlContainer);\r\n    document.removeEventListener('click', this.onDocumentClick);\r\n  }\r\n\r\n  onDocumentClick(event) {\r\n    if (this.controlContainer && !this.controlContainer.contains(event.target) && this.mapStyleContainer && this.styleButton) {\r\n      this.mapStyleContainer.style.display = 'none';\r\n      this.styleButton.style.display = 'block';\r\n    }\r\n  }\r\n}\r\n","export const deviceCategories = [\r\n  'default',\r\n  'animal',\r\n  'bicycle',\r\n  'boat',\r\n  'bus',\r\n  'car',\r\n  'crane',\r\n  'helicopter',\r\n  'motorcycle',\r\n  'offroad',\r\n  'person',\r\n  'pickup',\r\n  'plane',\r\n  'ship',\r\n  'tractor',\r\n  'train',\r\n  'tram',\r\n  'trolleybus',\r\n  'truck',\r\n  'van',\r\n  'scooter',\r\n];\r\n","export const loadImage = (url) => {\r\n  return new Promise(imageLoaded => {\r\n    const image = new Image();\r\n    image.onload = () => imageLoaded(image);\r\n    image.src = url;\r\n  });\r\n};\r\n\r\nexport const loadIcon = async (key, background, url) => {\r\n  const image = await loadImage(url);\r\n  const pixelRatio = window.devicePixelRatio;\r\n\r\n  const canvas = document.createElement('canvas');\r\n  canvas.width = background.width * pixelRatio;\r\n  canvas.height = background.height * pixelRatio;\r\n  canvas.style.width = `${background.width}px`;\r\n  canvas.style.height = `${background.height}px`;\r\n\r\n  const context = canvas.getContext('2d');\r\n  context.drawImage(background, 0, 0, canvas.width, canvas.height);\r\n\r\n  const iconRatio = 0.5;\r\n  const imageWidth = canvas.width * iconRatio;\r\n  const imageHeight = canvas.height * iconRatio;\r\n  context.drawImage(image, (canvas.width - imageWidth) / 2, (canvas.height - imageHeight) / 2, imageWidth, imageHeight);\r\n\r\n  return context.getImageData(0, 0, canvas.width, canvas.height);\r\n};\r\n\r\nexport const reverseCoordinates = it => {\r\n  if (!it) {\r\n    return it;\r\n  } else if (Array.isArray(it)) {\r\n    if (it.length === 2 && !Number.isNaN(it[0]) && !Number.isNaN(it[1])) {\r\n      return [it[1], it[0]];\r\n    } else {\r\n      return it.map(it => reverseCoordinates(it));\r\n    }\r\n  } else {\r\n    return {\r\n      ...it,\r\n      coordinates: reverseCoordinates(it.coordinates),\r\n    }\r\n  }\r\n}\r\n","import { useSelector } from 'react-redux';\r\n\r\nexport const usePreference = (key, defaultValue) => {\r\n  return useSelector(state => {\r\n    if (state.session.server.forceSettings) {\r\n      return state.session.server[key] || state.session.user[key] || defaultValue;\r\n    } else {\r\n      return state.session.user[key] || state.session.server[key] || defaultValue;\r\n    }\r\n  });\r\n};\r\n\r\nexport const useAttributePreference = (key, defaultValue) => {\r\n  return useSelector(state => {\r\n    if (state.session.server.forceSettings) {\r\n      return state.session.server.attributes[key] || state.session.user.attributes[key] || defaultValue;\r\n    } else {\r\n      return state.session.user.attributes[key] || state.session.server.attributes[key] || defaultValue;\r\n    }\r\n  });\r\n};\r\n","import 'mapbox-gl/dist/mapbox-gl.css';\r\nimport './switcher/switcher.css';\r\nimport mapboxgl from 'mapbox-gl';\r\nimport MapView from './MapView';\r\nimport { SwitcherControl } from './switcher/switcher';\r\nimport React, { useRef, useLayoutEffect, useEffect, useState } from 'react';\r\nimport { deviceCategories } from '../common/deviceCategories';\r\nimport { loadIcon, loadImage } from './mapUtil';\r\nimport { styleMapbox, styleOsm } from './mapStyles';\r\nimport t from '../common/localization';\r\nimport { useAttributePreference } from '../common/preferences';\r\n\r\nconst mapView = new MapView();\r\nexport const map = mapView.getMap();\r\n\r\nlet ready = false;\r\nconst readyListeners = new Set();\r\n\r\nconst addReadyListener = listener => {\r\n  readyListeners.add(listener);\r\n  listener(ready);\r\n};\r\n\r\nconst removeReadyListener = listener => {\r\n  readyListeners.delete(listener);\r\n};\r\n\r\nconst updateReadyValue = value => {\r\n  ready = value;\r\n  readyListeners.forEach(listener => listener(value));\r\n};\r\n\r\nconst initMap = async () => {\r\n  const background = await loadImage('images/background.svg');\r\n  await Promise.all(deviceCategories.map(async category => {\r\n    if (!mapView.hasImage(category)) {\r\n      const imageData = await loadIcon(category, background, `images/icon/${category}.svg`);\r\n      mapView.addImage(category, imageData, { pixelRatio: window.devicePixelRatio });\r\n    }\r\n  }));\r\n  updateReadyValue(true);\r\n};\r\n\r\nmapView.on('load', initMap);\r\n\r\n/*mapView.addControl(new mapboxgl.NavigationControl({\r\n  showCompass: false,\r\n}));*/\r\n\r\nmapView.addControl(new SwitcherControl(\r\n  [\r\n    { id: 'mapOsm', title: t('mapOsm'), uri: styleOsm() },\r\n    {\r\n      id: 'mapGoogle', title: t('google'), uri: ''\r\n    }, \r\n    {\r\n      title: t('mapbox'),\r\n      items: [\r\n        { id: 'mapMapboxGround', title: t('ground'), uri: styleMapbox('ckgnq6z3g0cpk1amqw19grzdk') },\r\n        { id: 'mapMapboxVegetation', title: t('vegetation'), uri: styleMapbox('ckgh3eou302i219pbebto8f0c') },\r\n        { id: 'mapMapboxApplications', title: t('applications'), uri: styleMapbox('ckhhgcqyq08or19mixazio9js') },\r\n        { id: 'mapMapboxDemo', title: t('demo'), uri: styleMapbox('ckhl25qo906em19mcaj1x2evp') }\r\n      ]\r\n    },\r\n    {\r\n      title: t('weather'),\r\n      items: [\r\n        { id: 'mapWinds', title: t('winds'), uri: ''},\r\n        { id: 'mapTemperatures', title: t('temperatures'), uri: ''},\r\n      ]\r\n    }, \r\n    {\r\n      title: t('hot_spots'),\r\n      items: [\r\n        { id: 'mapVIIRS-24hrs', title: `${t('VIIRS')} 24 hrs`, uri: '' },\r\n        { id: 'mapVIIRS-48hrs', title: `${t('VIIRS')} 48 hrs`, uri: '' },\r\n        { id: 'mapVIIRS-72hrs', title: `${t('VIIRS')} 72 hrs`, uri: '' },\r\n        { id: 'mapVIIRS-7days', title: `${t('VIIRS')} 7 days`, uri: '' },\r\n        { id: 'mapModis-24hrs', title: `${t('Modis')} 24 hrs`, uri: '' },\r\n        { id: 'mapModis-48hrs', title: `${t('Modis')} 48 hrs`, uri: '' },\r\n        { id: 'mapModis-72hrs', title: `${t('Modis')} 72 hrs`, uri: '' },\r\n        { id: 'mapModis-7days', title: `${t('Modis')} 7 days`, uri: '' },\r\n      ]\r\n    }    \r\n  ],\r\n  'mapOsm',\r\n  (styleId) => {\r\n    mapView.setMap(styleId);\r\n    updateReadyValue(false)\r\n  },\r\n  () => {\r\n    setTimeout(() => {\r\n      const waiting = () => {\r\n        if (!mapView.loaded()) {\r\n          setTimeout(waiting, 100);\r\n        } else {\r\n          initMap();\r\n        }\r\n      };\r\n      waiting();\r\n    }, 300)\r\n  },\r\n));\r\n\r\nconst Map = ({ children }) => {\r\n  const containerEl = useRef(null);\r\n\r\n  const [mapReady, setMapReady] = useState(false);\r\n\r\n  const mapboxAccessToken = useAttributePreference('mapboxAccessToken');\r\n  \r\n  useEffect(() => {\r\n    const script = document.createElement('script');\r\n    script.src = \"/windy.js\";\r\n    script.async = true;\r\n    document.body.appendChild(script);\r\n  return () => {\r\n      document.body.removeChild(script);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    mapboxgl.accessToken = mapboxAccessToken;\r\n  }, [mapboxAccessToken]);\r\n\r\n  useEffect(() => {\r\n    const listener = ready => setMapReady(ready);\r\n    addReadyListener(listener);\r\n    return () => {\r\n      removeReadyListener(listener);\r\n      document.getElementById('windy').style.visibility = 'hidden';\r\n      document.getElementById('mapbox').style.visibility = 'visible';\r\n    };\r\n  }, []);\r\n\r\n  useLayoutEffect(() => {\r\n    const currentEl = containerEl.current;\r\n    currentEl.appendChild(mapView.getContainer());\r\n    mapView.resize();\r\n    return () => {\r\n      currentEl.removeChild(mapView.getContainer());\r\n    };\r\n  }, [containerEl]);\r\n\r\n  return (\r\n    <div style={{ width: '100%', height: '100%' }} ref={containerEl}>\r\n      {mapReady && children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Map;\r\n","import { useEffect } from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport { map } from './Map';\r\n\r\nconst SelectedDeviceMap = () => {\r\n  const mapCenter = useSelector(state => {\r\n    if (state.devices.selectedId) {\r\n      const position = state.positions.items[state.devices.selectedId] || null;\r\n      if (position) {\r\n        return [position.longitude, position.latitude];\r\n      }\r\n    }\r\n    return null;\r\n  });\r\n\r\n  useEffect(() => {\r\n    map.easeTo({ center: mapCenter });\r\n  }, [mapCenter]);\r\n\r\n  return null;\r\n}\r\n\r\nexport default SelectedDeviceMap;\r\n","import { useEffect } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport circle from '@turf/circle';\r\n\r\nimport { map } from './Map';\r\n\r\nconst AccuracyMap = () => {\r\n  const id = 'accuracy';\r\n\r\n  const positions = useSelector(state => ({\r\n    type: 'FeatureCollection',\r\n    features: Object.values(state.positions.items).filter(position => position.accuracy > 0).map(position =>\r\n      circle([position.longitude, position.latitude], position.accuracy * 0.001)\r\n    ),\r\n  }));\r\n\r\n  useEffect(() => {\r\n    try {\r\n      map.addSource(id, {\r\n        'type': 'geojson',\r\n        'data': {\r\n          type: 'FeatureCollection',\r\n          features: []\r\n        }\r\n      });\r\n    } catch(e) {}\r\n\r\n    map.addLayer({\r\n      'source': id,\r\n      'id': id,\r\n      'type': 'fill',\r\n      'filter': [\r\n         'all',\r\n         ['==', '$type', 'Polygon'],\r\n      ],\r\n      'paint': {\r\n         'fill-color':'#3bb2d0',\r\n         'fill-outline-color':'#3bb2d0',\r\n         'fill-opacity':0.25,\r\n      },\r\n    });\r\n\r\n    return () => {\r\n      map.removeLayer(id);\r\n      try {map.removeSource(id);} catch(e) {}\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    map.getSource(id).setData(positions);\r\n  }, [positions]);\r\n\r\n  return null;\r\n}\r\n\r\nexport default AccuracyMap;\r\n","import wellknown from 'wellknown';\r\nimport { useEffect, useState } from 'react';\r\n\r\nimport { map } from './Map';\r\nimport { useEffectAsync } from '../reactHelper';\r\nimport { reverseCoordinates } from './mapUtil';\r\n\r\nconst GeofenceMap = () => {\r\n  const id = 'geofences';\r\n\r\n  const [geofences, setGeofences] = useState([]);\r\n\r\n  useEffectAsync(async () => {\r\n    const response = await fetch('/api/geofences');\r\n    if (response.ok) {\r\n      setGeofences(await response.json());\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      map.addSource(id, {\r\n        'type': 'geojson',\r\n        'data': {\r\n          type: 'FeatureCollection',\r\n          features: []\r\n        }\r\n      });\r\n    } catch(e) {}\r\n\r\n    map.addLayer({\r\n      'source': id,\r\n      'id': 'geofences-fill',\r\n      'type': 'fill',\r\n      'filter': [\r\n         'all',\r\n         ['==', '$type', 'Polygon'],\r\n      ],\r\n      'paint': {\r\n         'fill-color':'#3bb2d0',\r\n         'fill-outline-color':'#3bb2d0',\r\n         'fill-opacity':0.1,\r\n      },\r\n    });\r\n    map.addLayer({\r\n      'source': id,\r\n      'id': 'geofences-line',\r\n      'type': 'line',\r\n      'paint': {\r\n         'line-color': '#3bb2d0',\r\n         'line-width': 2,\r\n      },\r\n    });\r\n    map.addLayer({\r\n      'source': id,\r\n      'id': 'geofences-title',\r\n      'type': 'symbol',\r\n      'layout': {\r\n        'text-field': '{name}',\r\n        'text-font': ['Roboto Regular'],\r\n        'text-size': 12,\r\n      },\r\n      'paint': {\r\n        'text-halo-color': 'white',\r\n        'text-halo-width': 1,\r\n      },\r\n    });\r\n\r\n    return () => {\r\n      map.removeLayer('geofences-fill');\r\n      map.removeLayer('geofences-line');\r\n      map.removeLayer('geofences-title');\r\n      try {map.removeSource(id);} catch(e) {}\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    map.getSource(id).setData({\r\n      type: 'FeatureCollection',\r\n      features: geofences.map(item => [item.name, reverseCoordinates(wellknown(item.area))]).filter(([, geometry]) => !!geometry).map(([name, geometry]) => ({\r\n        type: 'Feature',\r\n        geometry: geometry,\r\n        properties: { name },\r\n      })),\r\n    });\r\n  }, [geofences]);\r\n\r\n  return null;\r\n}\r\n\r\nexport default GeofenceMap;\r\n","import moment from 'moment';\r\nimport t from '../common/localization';\r\n\r\nexport const formatPosition = (value, key) => {\r\n  if (value != null && typeof value === 'object') {\r\n    value = value[key];\r\n  }\r\n  switch (key) {\r\n    case 'fixTime':\r\n    case 'deviceTime':\r\n    case 'serverTime':\r\n      return moment(value).format('LLL');\r\n    case 'latitude':\r\n    case 'longitude':\r\n      return value.toFixed(5);\r\n    case 'speed':\r\n    case 'course':\r\n      return value.toFixed(1);\r\n    case 'batteryLevel':\r\n      return value + '%';\r\n    default:\r\n      if (typeof value === 'number') {\r\n        return formatNumber(value);\r\n      } else if (typeof value === 'boolean') {\r\n        return formatBoolean(value);\r\n      } else {\r\n        return value;\r\n      }\r\n  }\r\n};\r\n\r\nexport const formatBoolean = (value) => {\r\n  return value ? t('sharedYes') : t('sharedNo');\r\n};\r\n\r\nexport const formatNumber = (value, precision = 1) => {\r\n  return Number(value.toFixed(precision));\r\n};\r\n\r\nexport const formatDate = (value, format = 'YYYY-MM-DD HH:mm') => {\r\n  return moment(value).format(format);\r\n};\r\n\r\nexport const formatDistance = (value, unit) => {\r\n  switch (unit) {\r\n    case 'mi':\r\n      return `${(value * 0.000621371).toFixed(2)} ${t('sharedMi')}`;\r\n    case 'nmi':\r\n      return `${(value * 0.000539957).toFixed(2)} ${t('sharedNmi')}`;\r\n    case 'km':\r\n    default:\r\n        return `${(value * 0.001).toFixed(2)} ${t('sharedKm')}`;\r\n  }\r\n};\r\n\r\nexport const formatSpeed = (value, unit) => {\r\n  switch (unit) {\r\n    case 'kmh':\r\n      return `${(value * 1.852).toFixed(2)} ${t('sharedKmh')}`;\r\n    case 'mph':\r\n      return `${(value * 1.15078).toFixed(2)} ${t('sharedMph')}`;\r\n    case 'kn':\r\n    default:\r\n        return `${(value * 1).toFixed(2)} ${t('sharedKn')}`;\r\n  }  \r\n};\r\n\r\nexport const formatVolume = (value, unit) => {\r\n  switch (unit) {\r\n    case 'impGal':\r\n      return `${(value / 4.546).toFixed(2)} ${t('sharedGallonAbbreviation')}`;\r\n    case 'usGal':\r\n      return `${(value / 3.785).toFixed(2)} ${t('sharedGallonAbbreviation')}`;\r\n    case 'ltr':\r\n    default:\r\n        return `${(value / 1).toFixed(2)} ${t('sharedLiterAbbreviation')}`;\r\n  }  \r\n}\r\n\r\nexport const formatHours = (value) => {\r\n  return moment.duration(value).humanize();\r\n};\r\n","import t from '../common/localization'\r\nimport React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { formatPosition } from '../common/formatter';\r\n\r\nconst StatusView = ({ deviceId, onShowDetails }) => {\r\n  const device = useSelector(state => state.devices.items[deviceId]);\r\n  const position = useSelector(state => state.positions.items[deviceId]);\r\n\r\n  const handleClick = e => {\r\n    e.preventDefault();\r\n    onShowDetails(position.id);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <b>{t('deviceStatus')}:</b> {formatPosition(device.status, 'status')}<br />\r\n      <b>{t('sharedLocation')}:</b> {formatPosition(position, 'latitude')} {formatPosition(position, 'longitude')}<br />\r\n      <b>{t('positionSpeed')}:</b> {formatPosition(position.speed, 'speed')}<br />\r\n      <b>{t('positionCourse')}:</b> {formatPosition(position.course, 'course')}<br />\r\n      <b>{t('positionDistance')}:</b> {formatPosition(position.attributes.totalDistance, 'distance')}<br />\r\n      {position.attributes.batteryLevel &&\r\n        <><b>{t('positionBattery')}:</b> {formatPosition(position.attributes.batteryLevel, 'batteryLevel')}<br /></>\r\n      }\r\n      <a href=\"/\" onClick={handleClick}>{t('sharedShowDetails')}</a>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default StatusView;\r\n","import React, { useCallback, useEffect } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport mapboxgl from 'mapbox-gl';\r\nimport { Provider, useSelector } from 'react-redux';\r\n\r\nimport { map } from './Map';\r\nimport store from '../store';\r\nimport { useHistory } from 'react-router-dom';\r\nimport StatusView from './StatusView';\r\n\r\nconst PositionsMap = ({ positions }) => {\r\n  const id = 'positions';\r\n\r\n  const history = useHistory();\r\n  const devices = useSelector(state => state.devices.items);\r\n\r\n  const createFeature = (devices, position) => {\r\n    const device = devices[position.deviceId] || null;\r\n    return {\r\n      deviceId: position.deviceId,\r\n      name: device ? device.name : '',\r\n      category: device && (device.category || 'default'),\r\n    }\r\n  };\r\n\r\n  const onMouseEnter = () => map.getCanvas().style.cursor = 'pointer';\r\n  const onMouseLeave = () => map.getCanvas().style.cursor = '';\r\n\r\n  const onClickCallback = useCallback(event => {\r\n    const feature = event.features[0];\r\n    let coordinates = feature.geometry.coordinates.slice();\r\n    while (Math.abs(event.lngLat.lng - coordinates[0]) > 180) {\r\n      coordinates[0] += event.lngLat.lng > coordinates[0] ? 360 : -360;\r\n    }\r\n\r\n    const placeholder = document.createElement('div');\r\n    ReactDOM.render(\r\n      <Provider store={store}>\r\n        <StatusView deviceId={feature.properties.deviceId} onShowDetails={positionId => history.push(`/position/${positionId}`)} />\r\n      </Provider>,\r\n      placeholder\r\n    );\r\n\r\n    new mapboxgl.Popup({\r\n      offset: 25,\r\n      anchor: 'top'\r\n    })\r\n      .setDOMContent(placeholder)\r\n      .setLngLat(coordinates)\r\n      .addTo(map);\r\n  }, [history]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      map.addSource(id, {\r\n        'type': 'geojson',\r\n        'data': {\r\n          type: 'FeatureCollection',\r\n          features: [],\r\n        }\r\n      });\r\n    } catch(e) {}\r\n\r\n    map.addLayer({\r\n      'id': id,\r\n      'type': 'symbol',\r\n      'source': id,\r\n      'layout': {\r\n        'icon-image': '{category}',\r\n        'icon-allow-overlap': true,\r\n        'text-field': '{name}',\r\n        'text-allow-overlap': true,\r\n        'text-anchor': 'bottom',\r\n        'text-offset': [0, -2],\r\n        'text-font': ['Roboto Regular'],\r\n        'text-size': 12,\r\n      },\r\n      'paint': {\r\n        'text-halo-color': 'white',\r\n        'text-halo-width': 1,\r\n      },\r\n    });\r\n\r\n    map.on('mouseenter', id, onMouseEnter);\r\n    map.on('mouseleave', id, onMouseLeave);\r\n    map.on('click', id, onClickCallback);\r\n\r\n    return () => {\r\n      Array.from(map.getContainer().getElementsByClassName('mapboxgl-popup')).forEach(el => el.remove());\r\n\r\n      map.off('mouseenter', id, onMouseEnter);\r\n      map.off('mouseleave', id, onMouseLeave);\r\n      map.off('click', id, onClickCallback);\r\n\r\n      map.removeLayer(id);\r\n      try {map.removeSource(id);} catch(e) {}\r\n    };\r\n  }, [onClickCallback]);\r\n\r\n  useEffect(() => {\r\n    map.getSource(id).setData({\r\n      type: 'FeatureCollection',\r\n      features: positions.map(position => ({\r\n        type: 'Feature',\r\n        geometry: {\r\n          type: 'Point',\r\n          coordinates: [position.longitude, position.latitude],\r\n        },\r\n        properties: createFeature(devices, position),\r\n      }))\r\n    });\r\n  }, [devices, positions]);\r\n\r\n  return null;\r\n}\r\n\r\nexport default PositionsMap;\r\n","import React, {  } from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport PositionsMap from './PositionsMap';\r\n\r\nconst CurrentPositionsMap = () => {\r\n  const positions = useSelector(state => Object.values(state.positions.items));\r\n  return (<PositionsMap positions={positions} />);\r\n}\r\n\r\nexport default CurrentPositionsMap;\r\n","import mapboxgl from 'mapbox-gl';\r\nimport { useEffect } from 'react';\r\nimport { map } from './Map';\r\n\r\nconst CurrentLocationMap = () => {\r\n  useEffect(() => {\r\n    const control = new mapboxgl.GeolocateControl({\r\n      positionOptions: {\r\n        enableHighAccuracy: true,\r\n        timeout: 5000,\r\n      },\r\n      trackUserLocation: true,\r\n    });\r\n    map.addControl(control);\r\n    return () => map.removeControl(control);\r\n  }, []);\r\n\r\n  return null;\r\n}\r\n\r\nexport default CurrentLocationMap;\r\n","import React from 'react';\r\nimport { isWidthUp, makeStyles, withWidth } from '@material-ui/core';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\r\n\r\nimport ContainerDimensions from 'react-container-dimensions';\r\nimport DevicesList from './DevicesList';\r\nimport MainToolbar from './MainToolbar';\r\nimport Map from './map/Map';\r\nimport SelectedDeviceMap from './map/SelectedDeviceMap';\r\nimport AccuracyMap from './map/AccuracyMap';\r\nimport GeofenceMap from './map/GeofenceMap';\r\nimport CurrentPositionsMap from './map/CurrentPositionsMap';\r\nimport CurrentLocationMap from './map/CurrentLocationMap';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    height: '100%',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n    overflow: 'hidden',\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    [theme.breakpoints.down('xs')]: {\r\n      flexDirection: 'column-reverse',\r\n    }\r\n  },\r\n  drawerPaper: {\r\n    position: 'relative',\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: 350,\r\n    },\r\n    [theme.breakpoints.down('xs')]: {\r\n      height: 250,\r\n    }\r\n  },\r\n  mapContainer: {\r\n    flexGrow: 1,\r\n  },\r\n}));\r\n\r\nconst MainPage = ({ width }) => {\r\n  const classes = useStyles();\r\n  const [state, setState] = React.useState({\r\n    openDevicesList: false\r\n  });\r\n\r\n  const anchor = isWidthUp('sm', width) ? 'left' : 'bottom';\r\n\r\n\r\n  const toggleDevicesList = (open) => (event) => {\r\n    if (event.type === 'keydown' && (event.key === 'Tab' || event.key === 'Shift')) {\r\n      return;\r\n    }\r\n\r\n    setState({ ...state, openDevicesList: open });\r\n  };\r\n\r\n  const fabStyle = {\r\n      margin: 0,\r\n      top: '50%',\r\n      left: -20,\r\n      position: 'fixed',\r\n      zIndex: 1199,\r\n      paddingLeft: 10,\r\n      opacity: 0.6\r\n  }\r\n  return (\r\n    <div className={classes.root}>\r\n      <MainToolbar />\r\n      <div className={classes.content}>\r\n        <Fab size=\"small\" color=\"primary\" aria-label=\"add\" onClick={toggleDevicesList(true)} style={fabStyle}>\r\n          <ArrowForwardIosIcon />\r\n        </Fab>\r\n        <Drawer\r\n          anchor={anchor}\r\n          open={state.openDevicesList} \r\n          onClose={toggleDevicesList(false)}\r\n          classes={{ paper: classes.drawerPaper }}>\r\n          <DevicesList />\r\n        </Drawer>\r\n        <div className={classes.mapContainer}>\r\n          <ContainerDimensions>\r\n            <Map>\r\n              <CurrentLocationMap />\r\n              <GeofenceMap />\r\n              <AccuracyMap />\r\n              <CurrentPositionsMap />\r\n              <SelectedDeviceMap />\r\n            </Map>\r\n          </ContainerDimensions>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withWidth()(MainPage);\r\n","import React, { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { sessionActions } from './store';\r\nimport Button from '@material-ui/core/Button';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { makeStyles } from '@material-ui/core';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Link from '@material-ui/core/Link';\r\n\r\nimport t from './common/localization';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    width: 'auto',\r\n    marginLeft: theme.spacing(3),\r\n    marginRight: theme.spacing(3),\r\n    [theme.breakpoints.up(400 + theme.spacing(3 * 2))]: {\r\n      width: 400,\r\n      marginLeft: 'auto',\r\n      marginRight: 'auto',\r\n    },\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    padding: theme.spacing(3),\r\n  },\r\n  logo: {\r\n    margin: theme.spacing(2)\r\n  },\r\n  buttons: {\r\n    marginTop: theme.spacing(1),\r\n    display: 'flex',\r\n    justifyContent: 'space-evenly',\r\n    '& > *': {\r\n      flexBasis: '40%',\r\n    },\r\n    textAlign: 'center'\r\n  },\r\n}));\r\n\r\nconst LoginPage = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const [failed, setFailed] = useState(false);\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const handleEmailChange = (event) => {\r\n    setEmail(event.target.value);\r\n  }\r\n\r\n  const handlePasswordChange = (event) => {\r\n    setPassword(event.target.value);\r\n  }\r\n\r\n  const gotoRegister = (e) => {\r\n    e.preventDefault();\r\n    history.replace('register');\r\n  }\r\n\r\n  const handleLogin = async (event) => {\r\n    event.preventDefault();\r\n    const response = await fetch('/api/session', { method: 'POST', body: new URLSearchParams(`email=${email}&password=${password}`) });\r\n    if (response.ok) {\r\n      const user = await response.json();\r\n      dispatch(sessionActions.updateUser(user));\r\n      history.push('/');\r\n    } else {\r\n      setFailed(true);\r\n      setPassword('');\r\n    }\r\n  }\r\n\r\n  return (\r\n    <main className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n        <img className={classes.logo} src='/logo.png' alt='Geolynx' />\r\n        <Typography variant=\"h5\" gutterBottom style={{marginBottom:0}}>Login</Typography>\r\n        <form onSubmit={handleLogin}>\r\n\r\n          <TextField\r\n            margin='normal'\r\n            required\r\n            fullWidth\r\n            error={failed}\r\n            label={t('userEmail')}\r\n            name='email'\r\n            value={email}\r\n            autoComplete='email'\r\n            autoFocus\r\n            onChange={handleEmailChange}\r\n            helperText={failed && 'Invalid username or password'} />\r\n\r\n          <TextField\r\n            margin='normal'\r\n            required\r\n            fullWidth\r\n            error={failed}\r\n            label={t('userPassword')}\r\n            name='password'\r\n            value={password}\r\n            type='password'\r\n            autoComplete='current-password'\r\n            onChange={handlePasswordChange} />\r\n\r\n          <FormControl fullWidth margin='normal'>\r\n            <div className={classes.buttons}>\r\n              <Button type='submit' variant='contained' color='primary' disabled={!email || !password}>\r\n                {t('loginLogin')}\r\n              </Button>\r\n            </div>\r\n          </FormControl>\r\n          <FormControl fullWidth margin='normal'>\r\n            <div className={classes.buttons}>\r\n              <Typography>\r\n                <Link href=\"#\" onClick={gotoRegister}>{t('loginRegister')}</Link>\r\n              </Typography>\r\n            </div>\r\n          </FormControl>\r\n        </form>\r\n      </Paper>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default LoginPage;\r\n","import React, { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport Button from '@material-ui/core/Button';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { makeStyles } from '@material-ui/core';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Link from '@material-ui/core/Link';\r\n\r\nimport t from './common/localization';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    width: 'auto',\r\n    marginLeft: theme.spacing(3),\r\n    marginRight: theme.spacing(3),\r\n    [theme.breakpoints.up(400 + theme.spacing(3 * 2))]: {\r\n      width: 400,\r\n      marginLeft: 'auto',\r\n      marginRight: 'auto',\r\n    },\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    padding: theme.spacing(3),\r\n  },\r\n  logo: {\r\n    margin: theme.spacing(2)\r\n  },\r\n  buttons: {\r\n    marginTop: theme.spacing(1),\r\n    display: 'flex',\r\n    justifyContent: 'space-evenly',\r\n    '& > *': {\r\n      flexBasis: '40%',\r\n    },\r\n    textAlign: 'center'\r\n  },\r\n}));\r\n\r\nconst RegisterPage = () => {\r\n  const [failed, setFailed] = useState(false);\r\n  const [name, setName] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const handleNameChange = (event) => {\r\n    setName(event.target.value);\r\n  }\r\n\r\n  const handleEmailChange = (event) => {\r\n    setEmail(event.target.value);\r\n  }\r\n\r\n  const handlePasswordChange = (event) => {\r\n    setPassword(event.target.value);\r\n  }\r\n\r\n  const handleRegister = async (event) => {\r\n    event.preventDefault();\r\n    const data = {\r\n        name: name,\r\n        email: email,\r\n        password: password\r\n    }\r\n    const response = await fetch('/api/users', {\r\n        method: 'POST', \r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(data) \r\n    });\r\n    if (response.ok) {\r\n      history.replace('/login');\r\n    } else {\r\n      setFailed(true);\r\n      setPassword('');\r\n    }\r\n  }\r\n\r\n  const gotoLogin = (e) => {\r\n    e.preventDefault()\r\n    history.replace('login')\r\n  }\r\n\r\n  return (\r\n    <main className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n        <img className={classes.logo} src='/logo.png' alt='Geolynx' />\r\n        <Typography variant=\"h5\" gutterBottom style={{marginBottom:0}}>Register</Typography>\r\n        <form onSubmit={handleRegister}>\r\n          <TextField\r\n            margin='normal'\r\n            required\r\n            fullWidth\r\n            error={failed}\r\n            label={t('userName')}\r\n            name='name'\r\n            value={name}\r\n            autoFocus\r\n            onChange={handleNameChange}\r\n            helperText={failed && 'Invalid name'} />\r\n\r\n          <TextField\r\n            margin='normal'\r\n            required\r\n            fullWidth\r\n            error={failed}\r\n            label={t('userEmail')}\r\n            name='email'\r\n            value={email}\r\n            onChange={handleEmailChange}\r\n            helperText={failed && 'Invalid email'} />\r\n\r\n          <TextField\r\n            margin='normal'\r\n            required\r\n            fullWidth\r\n            error={failed}\r\n            label={t('userPassword')}\r\n            name='password'\r\n            value={password}\r\n            type='password'\r\n            onChange={handlePasswordChange}\r\n            helperText={failed && 'Invalid password'} />\r\n\r\n          <FormControl fullWidth margin='normal'>\r\n            <div className={classes.buttons}>\r\n              <Button type='submit' variant='contained'>\r\n                {t('loginRegister')}\r\n              </Button>\r\n            </div>\r\n          </FormControl>\r\n          <FormControl fullWidth margin='normal'>\r\n            <div className={classes.buttons}>\r\n              <Typography>\r\n                <Link href=\"#\" onClick={gotoLogin}>{t('loginLogin')}</Link>\r\n              </Typography>\r\n            </div>\r\n          </FormControl>\r\n        </form>\r\n      </Paper>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default RegisterPage;\r\n","import React, { useState } from 'react';\r\nimport { FormControl, InputLabel, Select, MenuItem, Button, TextField, ButtonGroup } from '@material-ui/core';\r\nimport t from '../common/localization';\r\nimport { useSelector } from 'react-redux';\r\nimport moment from 'moment';\r\n\r\nconst ReportFilter = ({ children, handleSubmit, showOnly }) => {\r\n  const devices = useSelector(state => Object.values(state.devices.items));\r\n  const [deviceId, setDeviceId] = useState();\r\n  const [period, setPeriod] = useState('today');\r\n  const [from, setFrom] = useState(moment().subtract(1, 'hour'));\r\n  const [to, setTo] = useState(moment());\r\n\r\n  const handleClick = (mail, json) => {\r\n    let selectedFrom;\r\n    let selectedTo;\r\n    switch (period) {\r\n      case 'today':\r\n        selectedFrom = moment().startOf('day');\r\n        selectedTo = moment().endOf('day');\r\n        break;\r\n      case 'yesterday':\r\n        selectedFrom = moment().subtract(1, 'day').startOf('day');\r\n        selectedTo = moment().subtract(1, 'day').endOf('day');\r\n        break;\r\n      case 'thisWeek':\r\n        selectedFrom = moment().startOf('week');\r\n        selectedTo = moment().endOf('week');\r\n        break;\r\n      case 'previousWeek':\r\n        selectedFrom = moment().subtract(1, 'week').startOf('week');\r\n        selectedTo = moment().subtract(1, 'week').endOf('week');\r\n        break;\r\n      case 'thisMonth':\r\n        selectedFrom = moment().startOf('month');\r\n        selectedTo = moment().endOf('month');\r\n        break;\r\n      case 'previousMonth':\r\n        selectedFrom = moment().subtract(1, 'month').startOf('month');\r\n        selectedTo = moment().subtract(1, 'month').endOf('month');\r\n        break;\r\n      default:\r\n        selectedFrom = from;\r\n        selectedTo = to;\r\n        break;\r\n    }\r\n\r\n    const accept = json ? 'application/json' : 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet';\r\n    handleSubmit(\r\n      deviceId,\r\n      selectedFrom.toISOString(),\r\n      selectedTo.toISOString(),\r\n      mail,\r\n      { Accept: accept }\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <FormControl variant=\"filled\" margin=\"normal\" fullWidth>\r\n        <InputLabel>{t('reportDevice')}</InputLabel>\r\n        <Select value={deviceId} onChange={(e) => setDeviceId(e.target.value)}>\r\n          {devices.map((device) => (\r\n            <MenuItem value={device.id}>{device.name}</MenuItem>\r\n          ))}\r\n        </Select>\r\n      </FormControl>\r\n      <FormControl variant=\"filled\" margin=\"normal\" fullWidth>\r\n        <InputLabel>{t('reportPeriod')}</InputLabel>\r\n        <Select value={period} onChange={(e) => setPeriod(e.target.value)}>\r\n          <MenuItem value=\"today\">{t('reportToday')}</MenuItem>\r\n          <MenuItem value=\"yesterday\">{t('reportYesterday')}</MenuItem>\r\n          <MenuItem value=\"thisWeek\">{t('reportThisWeek')}</MenuItem>\r\n          <MenuItem value=\"previousWeek\">{t('reportPreviousWeek')}</MenuItem>\r\n          <MenuItem value=\"thisMonth\">{t('reportThisMonth')}</MenuItem>\r\n          <MenuItem value=\"previousMonth\">{t('reportPreviousMonth')}</MenuItem>\r\n          <MenuItem value=\"custom\">{t('reportCustom')}</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n      {period === 'custom' && (\r\n        <TextField\r\n          margin=\"normal\"\r\n          variant=\"filled\"\r\n          label={t('reportFrom')}\r\n          type=\"datetime-local\"\r\n          value={from.format(moment.HTML5_FMT.DATETIME_LOCAL)}\r\n          onChange={e => setFrom(moment(e.target.value, moment.HTML5_FMT.DATETIME_LOCAL))}\r\n          fullWidth />\r\n      )}\r\n      {period === 'custom' && (\r\n        <TextField\r\n          margin=\"normal\"\r\n          variant=\"filled\"\r\n          label={t('reportTo')}\r\n          type=\"datetime-local\"\r\n          value={to.format(moment.HTML5_FMT.DATETIME_LOCAL)}\r\n          onChange={e => setTo(moment(e.target.value, moment.HTML5_FMT.DATETIME_LOCAL))}\r\n          fullWidth />\r\n      )}\r\n      {children}\r\n      <FormControl margin=\"normal\" fullWidth>\r\n        <ButtonGroup color=\"primary\" orientation=\"vertical\" disabled={!deviceId}>\r\n          <Button onClick={() => handleClick(false, true)}>{t('reportShow')}</Button>\r\n          {!showOnly && <Button onClick={() => handleClick(false, false)}>{t('reportExport')}</Button>}\r\n          {!showOnly && <Button onClick={() => handleClick(true, false)}>{t('reportEmail')}</Button>}\r\n        </ButtonGroup>\r\n      </FormControl>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ReportFilter;\r\n","import React from 'react';\r\nimport { Grid, Paper, makeStyles } from '@material-ui/core';\r\nimport MainToolbar from '../MainToolbar';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    height: '100%',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n  },\r\n  content: {\r\n    flex: 1,\r\n    overflow: 'auto',\r\n    padding: theme.spacing(2),\r\n  },\r\n  form: {\r\n    padding: theme.spacing(1, 2, 2),\r\n  },\r\n}));\r\n\r\nconst ReportLayoutPage = ({ reportFilterForm:ReportFilterForm, setItems, children }) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.root}>\r\n      <MainToolbar />\r\n      <div className={classes.content}>\r\n        <Grid container spacing={2}>\r\n          <Grid item xs={12} md={3} lg={2}>\r\n            <Paper className={classes.form}>\r\n              <ReportFilterForm setItems={ setItems } />\r\n            </Paper>\r\n          </Grid>\r\n          <Grid item xs={12} md={9} lg={10}>\r\n            {children}\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ReportLayoutPage;\r\n","import React, { useState } from 'react';\r\nimport { TableContainer, Table, TableRow, TableCell, TableHead, TableBody, Paper } from '@material-ui/core';\r\nimport t from '../common/localization';\r\nimport { formatPosition } from '../common/formatter';\r\nimport ReportFilter from './ReportFilter';\r\nimport ReportLayoutPage from './ReportLayoutPage';\r\n\r\nconst ReportFilterForm = ({ setItems }) => {\r\n\r\n  const handleSubmit = async (deviceId, from, to, mail, headers) => {\r\n    const query = new URLSearchParams({ deviceId, from, to, mail });\r\n    const response = await fetch(`/api/reports/route?${query.toString()}`, { headers });\r\n    if (response.ok) {\r\n      const contentType = response.headers.get('content-type');\r\n      if (contentType) {\r\n        if (contentType === 'application/json') {\r\n          setItems(await response.json());\r\n        } else {\r\n          window.location.assign(window.URL.createObjectURL(await response.blob()));\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return <ReportFilter handleSubmit={handleSubmit} />;\r\n};\r\n\r\nconst RouteReportPage = () => {\r\n\r\n  const [items, setItems] = useState([]);\r\n\r\n  return (\r\n    <ReportLayoutPage reportFilterForm={ReportFilterForm} setItems={setItems}>\r\n      <TableContainer component={Paper}>\r\n        <Table>\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>{t('positionFixTime')}</TableCell>\r\n              <TableCell>{t('positionLatitude')}</TableCell>\r\n              <TableCell>{t('positionLongitude')}</TableCell>\r\n              <TableCell>{t('positionSpeed')}</TableCell>\r\n              <TableCell>{t('positionAddress')}</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {items.map((item) => (\r\n              <TableRow key={item.id}>\r\n                <TableCell>{formatPosition(item, 'fixTime')}</TableCell>\r\n                <TableCell>{formatPosition(item, 'latitude')}</TableCell>\r\n                <TableCell>{formatPosition(item, 'longitude')}</TableCell>\r\n                <TableCell>{formatPosition(item, 'speed')}</TableCell>\r\n                <TableCell>{formatPosition(item, 'address')}</TableCell>\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </ReportLayoutPage>\r\n  );\r\n};\r\n\r\nexport default RouteReportPage;\r\n","import React, { useState } from 'react';\r\nimport { Button, Dialog, DialogActions, DialogContent, FormControl, InputLabel, MenuItem, Select, TextField } from \"@material-ui/core\";\r\n\r\nimport t from '../common/localization';\r\nimport { Autocomplete, createFilterOptions } from '@material-ui/lab';\r\n\r\nconst AddAttributeDialog = ({ open, onResult, definitions }) => {\r\n  const filter = createFilterOptions({\r\n    stringify: option => option.name,\r\n  });\r\n\r\n  const options = Object.entries(definitions).map(([key, value]) => ({\r\n    key,\r\n    name: value.name,\r\n    type: value.type,\r\n  }));\r\n\r\n  const [key, setKey] = useState();\r\n  const [type, setType] = useState('string');\r\n\r\n  return (\r\n    <Dialog open={open} fullWidth maxWidth=\"xs\">\r\n      <DialogContent>\r\n        <Autocomplete\r\n          onChange={(_, option) => {\r\n            setKey(option && typeof option === 'object' ? option.key : option);\r\n            if (option && option.type) {\r\n              setType(option.type);\r\n            }\r\n          }}\r\n          filterOptions={(options, params) => {\r\n            const filtered = filter(options, params);\r\n            if (params.inputValue) {\r\n              filtered.push({\r\n                key: params.inputValue,\r\n                name: params.inputValue,\r\n              });\r\n            }\r\n            return filtered;\r\n          }}\r\n          options={options}\r\n          getOptionLabel={option => {\r\n            return option && typeof option === 'object' ? option.name : option;\r\n          }}\r\n          renderOption={option => option.name}\r\n          freeSolo\r\n          renderInput={(params) => (\r\n            <TextField {...params} label={t('sharedAttribute')} variant=\"filled\" margin=\"normal\" />\r\n          )}\r\n        />\r\n        <FormControl\r\n          variant=\"filled\"\r\n          margin=\"normal\"\r\n          fullWidth\r\n          disabled={key in definitions}>\r\n          <InputLabel>{t('sharedType')}</InputLabel>\r\n          <Select\r\n            value={type}\r\n            onChange={e => setType(e.target.value)}>\r\n            <MenuItem value={'string'}>{t('sharedTypeString')}</MenuItem>\r\n            <MenuItem value={'number'}>{t('sharedTypeNumber')}</MenuItem>\r\n            <MenuItem value={'boolean'}>{t('sharedTypeBoolean')}</MenuItem>\r\n          </Select>\r\n        </FormControl>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button\r\n          color=\"primary\"\r\n          disabled={!key}\r\n          onClick={() => onResult({ key, type })}>\r\n          {t('sharedAdd')}\r\n        </Button>\r\n        <Button\r\n          autoFocus\r\n          onClick={() => onResult(null)}>\r\n          {t('sharedCancel')}\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n\r\nexport default AddAttributeDialog;\r\n","import React, { useState } from 'react';\r\n\r\nimport t from '../common/localization';\r\n\r\nimport { Button, Checkbox, FilledInput, FormControl, FormControlLabel, Grid, IconButton, InputAdornment, InputLabel, makeStyles } from \"@material-ui/core\";\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport AddAttributeDialog from './AddAttributeDialog';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  addButton: {\r\n    marginTop: theme.spacing(2),\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n  removeButton: {\r\n    marginRight: theme.spacing(1.5),\r\n  },\r\n}));\r\n\r\nconst EditAttributesView = ({ attributes, setAttributes, definitions }) => {\r\n  const classes = useStyles();\r\n\r\n  const [addDialogShown, setAddDialogShown] = useState(false);\r\n\r\n  const convertToList = (attributes) => {\r\n    let booleanList = [];\r\n    let otherList = [];\r\n    for (const key in attributes) {\r\n      const value = attributes[key];\r\n      const type = getAttributeType(value);\r\n      if (type === 'boolean') {\r\n        booleanList.push({ key, value, type });\r\n      } else {\r\n        otherList.push({ key, value, type });\r\n      }\r\n    }\r\n    return otherList.concat(booleanList);\r\n  }\r\n\r\n  const handleAddResult = (definition) => {\r\n    setAddDialogShown(false);\r\n    if (definition) {\r\n      switch(definition.type) {\r\n        case 'number':\r\n          updateAttribute(definition.key, 0);\r\n          break;\r\n        case 'boolean':\r\n          updateAttribute(definition.key, false);\r\n          break;\r\n        default:\r\n          updateAttribute(definition.key, \"\");\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  const updateAttribute = (key, value) => {\r\n    let updatedAttributes = {...attributes};\r\n    updatedAttributes[key] = value;\r\n    setAttributes(updatedAttributes);\r\n  };\r\n\r\n  const deleteAttribute = (key) => {\r\n    let updatedAttributes = {...attributes};\r\n    delete updatedAttributes[key];\r\n    setAttributes(updatedAttributes);\r\n  };\r\n\r\n  const getAttributeName = (key) => {\r\n    const definition = definitions[key];\r\n    return definition ? definition.name : key;\r\n  };\r\n\r\n  const getAttributeType = (value) => {\r\n    if (typeof value === 'number') {\r\n      return 'number';\r\n    } else if (typeof value === 'boolean') {\r\n      return 'boolean';\r\n    } else {\r\n      return 'string';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {convertToList(attributes).map(({ key, value, type }) => {\r\n        if (type === 'boolean') {\r\n          return (\r\n            <Grid container direction=\"row\" justify=\"space-between\">\r\n              <FormControlLabel\r\n                control={\r\n                  <Checkbox\r\n                    checked={value}\r\n                    onChange={e => updateAttribute(key, e.target.checked)}\r\n                    />\r\n                }\r\n                label={getAttributeName(key)} />\r\n              <IconButton className={classes.removeButton} onClick={() => deleteAttribute(key)}>\r\n                <CloseIcon />\r\n              </IconButton>\r\n            </Grid>\r\n          );\r\n        } else {\r\n          return (\r\n            <FormControl variant=\"filled\" margin=\"normal\" key={key}>\r\n              <InputLabel>{getAttributeName(key)}</InputLabel>\r\n              <FilledInput\r\n                type={type === 'number' ? 'number' : 'text'}\r\n                defaultValue={value}\r\n                onChange={e => updateAttribute(key, e.target.value)}\r\n                endAdornment={\r\n                  <InputAdornment position=\"end\">\r\n                    <IconButton onClick={() => deleteAttribute(key)}>\r\n                      <CloseIcon />\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                }\r\n                />\r\n            </FormControl>\r\n          );\r\n        }\r\n      })}\r\n      <Button\r\n        size=\"large\"\r\n        variant=\"outlined\"\r\n        color=\"primary\"\r\n        onClick={() => setAddDialogShown(true)}\r\n        startIcon={<AddIcon />}\r\n        className={classes.addButton}>\r\n        {t('sharedAdd')}\r\n      </Button>\r\n      <AddAttributeDialog\r\n        open={addDialogShown}\r\n        onResult={handleAddResult}\r\n        definitions={definitions}\r\n        />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default EditAttributesView;\r\n","import t from '../common/localization'\r\n\r\nexport default {\r\n  'speedLimit': {\r\n    name: t('attributeSpeedLimit'),\r\n    type: 'string',\r\n  },\r\n  'report.ignoreOdometer': {\r\n    name: t('attributeReportIgnoreOdometer'),\r\n    type: 'boolean',\r\n  },\r\n};\r\n","import t from '../common/localization'\r\n\r\nexport default {\r\n  'notificationTokens': {\r\n    name: t('attributeNotificationTokens'),\r\n    type: 'string',\r\n  },\r\n  'web.liveRouteLength': {\r\n    name: t('attributeWebLiveRouteLength'),\r\n    type: 'number',\r\n  },\r\n  'web.selectZoom': {\r\n    name: t('attributeWebSelectZoom'),\r\n    type: 'number',\r\n  },\r\n  'web.maxZoom': {\r\n    name: t('attributeWebMaxZoom'),\r\n    type: 'number',\r\n  },\r\n  'ui.disableReport': {\r\n    name: t('attributeUiDisableReport'),\r\n    type: 'boolean',\r\n  },\r\n  'ui.disableEvents': {\r\n    name: t('attributeUiDisableEvents'),\r\n    type: 'boolean',\r\n  },\r\n  'ui.disableVehicleFetures': {\r\n    name: t('attributeUiDisableVehicleFetures'),\r\n    type: 'boolean',\r\n  },\r\n  'ui.disableDrivers': {\r\n    name: t('attributeUiDisableDrivers'),\r\n    type: 'boolean',\r\n  },\r\n  'ui.disableComputedAttributes': {\r\n    name: t('attributeUiDisableComputedAttributes'),\r\n    type: 'boolean',\r\n  },\r\n  'ui.disableCalendars': {\r\n    name: t('attributeUiDisableCalendars'),\r\n    type: 'boolean',\r\n  },\r\n  'ui.disableMaintenance': {\r\n    name: t('attributeUiDisableMaintenance'),\r\n    type: 'boolean',\r\n  },\r\n  'ui.hidePositionAttributes': {\r\n    name: t('attributeUiHidePositionAttributes'),\r\n    type: 'string',\r\n  },\r\n  'distanceUnit': {\r\n    name: t('settingsDistanceUnit'),\r\n    type: 'string',\r\n  },\r\n  'speedUnit': {\r\n    name: t('settingsSpeedUnit'),\r\n    type: 'string',\r\n  },\r\n  'volumeUnit': {\r\n    name: t('settingsVolumeUnit'),\r\n    type: 'string',\r\n  },\r\n  'timezone': {\r\n    name: t('sharedTimezone'),\r\n    type: 'string',\r\n  },\r\n};\r\n","import React from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport t from '../common/localization';\r\nimport { Accordion, AccordionSummary, AccordionDetails, makeStyles, Typography, Button, FormControl, Container, Checkbox, FormControlLabel } from '@material-ui/core';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport MainToolbar from '../MainToolbar';\r\nimport { sessionActions } from '../store';\r\nimport EditAttributesView from '../attributes/EditAttributesView';\r\nimport deviceAttributes from '../attributes/deviceAttributes';\r\nimport userAttributes from '../attributes/userAttributes';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  container: {\r\n    marginTop: theme.spacing(2),\r\n  },\r\n  buttons: {\r\n    display: 'flex',\r\n    justifyContent: 'space-evenly',\r\n    '& > *': {\r\n      flexBasis: '33%',\r\n    },\r\n  },\r\n  details: {\r\n    flexDirection: 'column',\r\n  },\r\n}));\r\n\r\nconst ServerPage = () => {\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const classes = useStyles();\r\n\r\n  const item = useSelector(state => state.session.server);\r\n  const setItem = (updatedItem) => dispatch(sessionActions.updateServer(updatedItem));\r\n\r\n  const handleSave = async () => {\r\n    const response = await fetch('/api/server', {\r\n      method: 'PUT',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(item),\r\n    });\r\n\r\n    if (response.ok) {\r\n      history.goBack();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <MainToolbar />\r\n      <Container maxWidth='xs' className={classes.container}>\r\n        {item &&\r\n          <>\r\n            <Accordion defaultExpanded>\r\n              <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n                <Typography variant=\"subtitle1\">\r\n                  {t('sharedPreferences')}\r\n                </Typography>\r\n              </AccordionSummary>\r\n              <AccordionDetails className={classes.details}>\r\n                <TextField\r\n                  margin=\"normal\"\r\n                  defaultValue={item.announcement}\r\n                  onChange={event => setItem({...item, announcement: event.target.value})}\r\n                  label={t('serverAnnouncement')}\r\n                  variant=\"filled\" />\r\n              </AccordionDetails>\r\n            </Accordion>\r\n            <Accordion>\r\n              <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n                <Typography variant=\"subtitle1\">\r\n                  {t('sharedPermissions')}\r\n                </Typography>\r\n              </AccordionSummary>\r\n              <AccordionDetails className={classes.details}>\r\n                <FormControlLabel\r\n                  control={<Checkbox checked={item.registration} onChange={event => setItem({...item, registration: event.target.checked})} />}\r\n                  label={t('serverRegistration')} />\r\n                <FormControlLabel\r\n                  control={<Checkbox checked={item.readonly} onChange={event => setItem({...item, readonly: event.target.checked})} />}\r\n                  label={t('serverReadonly')} />\r\n                <FormControlLabel\r\n                  control={<Checkbox checked={item.deviceReadonly} onChange={event => setItem({...item, deviceReadonly: event.target.checked})} />}\r\n                  label={t('userDeviceReadonly')} />\r\n                <FormControlLabel\r\n                  control={<Checkbox checked={item.limitCommands} onChange={event => setItem({...item, limitCommands: event.target.checked})} />}\r\n                  label={t('userLimitCommands')} />\r\n              </AccordionDetails>\r\n            </Accordion>\r\n            <Accordion>\r\n              <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n                <Typography variant=\"subtitle1\">\r\n                  {t('sharedAttributes')}\r\n                </Typography>\r\n              </AccordionSummary>\r\n              <AccordionDetails className={classes.details}>\r\n                <EditAttributesView\r\n                  attributes={item.attributes}\r\n                  setAttributes={attributes => setItem({...item, attributes})}\r\n                  definitions={{...userAttributes, ...deviceAttributes}}\r\n                  />\r\n              </AccordionDetails>\r\n            </Accordion>\r\n          </>\r\n        }\r\n        <FormControl fullWidth margin='normal'>\r\n          <div className={classes.buttons}>\r\n            <Button type='button' color='primary' variant='outlined' onClick={() => history.goBack()}>\r\n              {t('sharedCancel')}\r\n            </Button>\r\n            <Button type='button' color='primary' variant='contained' onClick={handleSave}>\r\n              {t('sharedSave')}\r\n            </Button>\r\n          </div>\r\n        </FormControl>\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ServerPage;\r\n","import React, { useState } from 'react';\r\nimport MainToolbar from '../MainToolbar';\r\nimport { TableContainer, Table, TableRow, TableCell, TableHead, TableBody, makeStyles, IconButton } from '@material-ui/core';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport t from '../common/localization';\r\nimport { useEffectAsync } from '../reactHelper';\r\nimport EditCollectionView from '../EditCollectionView';\r\nimport { formatBoolean } from '../common/formatter';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  columnAction: {\r\n    width: theme.spacing(1),\r\n    padding: theme.spacing(0, 1),\r\n  },\r\n}));\r\n\r\nconst UsersView = ({ updateTimestamp, onMenuClick }) => {\r\n  const classes = useStyles();\r\n\r\n  const [items, setItems] = useState([]);\r\n\r\n  useEffectAsync(async () => {\r\n    const response = await fetch('/api/users');\r\n    if (response.ok) {\r\n      setItems(await response.json());\r\n    }\r\n  }, [updateTimestamp]);\r\n\r\n  return (\r\n    <TableContainer>\r\n    <Table>\r\n      <TableHead>\r\n        <TableRow>\r\n          <TableCell className={classes.columnAction} />\r\n          <TableCell>{t('sharedName')}</TableCell>\r\n          <TableCell>{t('userEmail')}</TableCell>\r\n          <TableCell>{t('userAdmin')}</TableCell>\r\n          <TableCell>{t('sharedDisabled')}</TableCell>\r\n        </TableRow>\r\n      </TableHead>\r\n      <TableBody>\r\n        {items.map((item) => (\r\n          <TableRow key={item.id}>\r\n            <TableCell className={classes.columnAction} padding=\"none\">\r\n              <IconButton onClick={(event) => onMenuClick(event.currentTarget, item.id)}>\r\n                <MoreVertIcon />\r\n              </IconButton>\r\n            </TableCell>\r\n            <TableCell>{item.name}</TableCell>\r\n            <TableCell>{item.email}</TableCell>\r\n            <TableCell>{formatBoolean(item, 'administrator')}</TableCell>\r\n            <TableCell>{formatBoolean(item, 'disabled')}</TableCell>\r\n          </TableRow>\r\n        ))}\r\n      </TableBody>\r\n    </Table>\r\n    </TableContainer>\r\n  );\r\n}\r\n\r\nconst UsersPage = () => {\r\n  return (\r\n    <>\r\n      <MainToolbar />\r\n      <EditCollectionView content={UsersView} editPath=\"/user\" endpoint=\"users\" />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default UsersPage;\r\n","import React from 'react';\r\nimport MainToolbar from './MainToolbar';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport Button from '@material-ui/core/Button';\r\nimport FormControl from '@material-ui/core/FormControl';\r\n\r\nimport t from './common/localization';\r\nimport { useEffectAsync } from './reactHelper';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  container: {\r\n    marginTop: theme.spacing(2),\r\n  },\r\n  buttons: {\r\n    display: 'flex',\r\n    justifyContent: 'space-evenly',\r\n    '& > *': {\r\n      flexBasis: '33%',\r\n    },\r\n  },\r\n}));\r\n\r\nconst EditItemView = ({ children, endpoint, item, setItem }) => {\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n  const { id } = useParams();\r\n\r\n  useEffectAsync(async () => {\r\n    if (id) {\r\n      const response = await fetch(`/api/${endpoint}/${id}`);\r\n      if (response.ok) {\r\n        setItem(await response.json());\r\n      }\r\n    } else {\r\n      setItem({});\r\n    }\r\n  }, [id]);\r\n\r\n  const handleSave = async () => {\r\n    let url = `/api/${endpoint}`;\r\n    if (id) {\r\n      url += `/${id}`;\r\n    }\r\n\r\n    const response = await fetch(url, {\r\n      method: !id ? 'POST' : 'PUT',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(item),\r\n    });\r\n\r\n    if (response.ok) {\r\n      history.goBack();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <MainToolbar />\r\n      <Container maxWidth='xs' className={classes.container}>\r\n        {children}\r\n        <FormControl fullWidth margin='normal'>\r\n          <div className={classes.buttons}>\r\n            <Button type='button' color='primary' variant='outlined' onClick={() => history.goBack()}>\r\n              {t('sharedCancel')}\r\n            </Button>\r\n            <Button type='button' color='primary' variant='contained' onClick={handleSave}>\r\n              {t('sharedSave')}\r\n            </Button>\r\n          </div>\r\n        </FormControl>\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default EditItemView;\r\n","import { FormControl, InputLabel, MenuItem, Select } from '@material-ui/core';\r\nimport React, { useState } from 'react';\r\nimport { useEffectAsync } from '../reactHelper';\r\n\r\nconst SelectField = ({\r\n  margin,\r\n  variant,\r\n  label,\r\n  multiple,\r\n  defaultValue,\r\n  onChange,\r\n  endpoint,\r\n  data,\r\n  keyGetter = item => item.id,\r\n  titleGetter = item => item.name,\r\n}) => {\r\n  const [items, setItems] = useState(data);\r\n\r\n  useEffectAsync(async () => {\r\n    if (endpoint) {\r\n      const response = await fetch(endpoint);\r\n      if (response.ok) {\r\n        setItems(await response.json());\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  if (items) {\r\n    return (\r\n      <FormControl margin={margin} variant={variant}>\r\n        <InputLabel>{label}</InputLabel>\r\n        <Select\r\n          multiple={multiple}\r\n          defaultValue={defaultValue}\r\n          onChange={onChange}>\r\n          {!multiple &&\r\n            <MenuItem value={0}>&nbsp;</MenuItem>\r\n          }\r\n          {items.map(item => (\r\n            <MenuItem key={keyGetter(item)} value={keyGetter(item)}>{titleGetter(item)}</MenuItem>\r\n          ))}\r\n        </Select>\r\n      </FormControl>\r\n    );\r\n  } else {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport default SelectField;\r\n","import { FormControl, InputLabel, MenuItem, Select } from '@material-ui/core';\r\nimport React, { useState } from 'react';\r\nimport { useEffectAsync } from '../reactHelper';\r\n\r\nconst LinkField = ({\r\n  margin,\r\n  variant,\r\n  label,\r\n  endpointAll,\r\n  endpointLinked,\r\n  baseId,\r\n  keyBase,\r\n  keyLink,\r\n  keyGetter = item => item.id,\r\n  titleGetter = item => item.name,\r\n}) => {\r\n  const [items, setItems] = useState();\r\n  const [linked, setLinked] = useState();\r\n\r\n  useEffectAsync(async () => {\r\n    const response = await fetch(endpointAll);\r\n    if (response.ok) {\r\n      setItems(await response.json());\r\n    }\r\n  }, []);\r\n\r\n  useEffectAsync(async () => {\r\n    const response = await fetch(endpointLinked);\r\n    if (response.ok) {\r\n      const data = await response.json();\r\n      setLinked(data.map(it => it.id));\r\n    }\r\n  }, []);\r\n\r\n  const createBody = linkId => {\r\n    const body = {};\r\n    body[keyBase] = baseId;\r\n    body[keyLink] = linkId;\r\n    return body;\r\n  }\r\n\r\n  const onChange = async event => {\r\n    const oldValue = linked;\r\n    const newValue = event.target.value;\r\n    for (const added of newValue.filter(it => !oldValue.includes(it))) {\r\n      await fetch('/api/permissions', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(createBody(added)),\r\n      });\r\n    }\r\n    for (const removed of oldValue.filter(it => !newValue.includes(it))) {\r\n      await fetch('/api/permissions', {\r\n        method: 'DELETE',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(createBody(removed)),\r\n      });\r\n    }\r\n    setLinked(newValue);\r\n  };\r\n\r\n  if (items && linked) {\r\n    return (\r\n      <FormControl margin={margin} variant={variant}>\r\n        <InputLabel>{label}</InputLabel>\r\n        <Select\r\n          multiple\r\n          value={linked}\r\n          onChange={onChange}>\r\n          {items.map(item => (\r\n            <MenuItem key={keyGetter(item)} value={keyGetter(item)}>{titleGetter(item)}</MenuItem>\r\n          ))}\r\n        </Select>\r\n      </FormControl>\r\n    );\r\n  } else {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport default LinkField;\r\n","export const prefixString = (prefix, value) => {\r\n  return prefix + value.charAt(0).toUpperCase() + value.slice(1);\r\n}\r\n\r\nexport const unprefixString = (prefix, value) => {\r\n  return value.charAt(prefix.length).toLowerCase() + value.slice(prefix.length + 1);\r\n}\r\n","import React, { useState } from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport t from './common/localization';\r\nimport EditItemView from './EditItemView';\r\nimport { Accordion, AccordionSummary, AccordionDetails, makeStyles, Typography, FormControlLabel, Checkbox } from '@material-ui/core';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport EditAttributesView from './attributes/EditAttributesView';\r\nimport deviceAttributes from './attributes/deviceAttributes';\r\nimport SelectField from './form/SelectField';\r\nimport { deviceCategories } from './common/deviceCategories';\r\nimport LinkField from './form/LinkField';\r\nimport { prefixString } from './common/stringUtils';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  details: {\r\n    flexDirection: 'column',\r\n  },\r\n}));\r\n\r\nconst DevicePage = () => {\r\n  const classes = useStyles();\r\n\r\n  const [item, setItem] = useState();\r\n\r\n  return (\r\n    <EditItemView endpoint=\"devices\" item={item} setItem={setItem}>\r\n      {item &&\r\n        <>\r\n          <Accordion defaultExpanded>\r\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n              <Typography variant=\"subtitle1\">\r\n                {t('sharedRequired')}\r\n              </Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails className={classes.details}>\r\n              <TextField\r\n                margin=\"normal\"\r\n                defaultValue={item.name}\r\n                onChange={event => setItem({...item, name: event.target.value})}\r\n                label={t('sharedName')}\r\n                variant=\"filled\" />\r\n              <TextField\r\n                margin=\"normal\"\r\n                defaultValue={item.uniqueId}\r\n                onChange={event => setItem({...item, uniqueId: event.target.value})}\r\n                label={t('deviceIdentifier')}\r\n                variant=\"filled\" />\r\n            </AccordionDetails>\r\n          </Accordion>\r\n          <Accordion>\r\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n              <Typography variant=\"subtitle1\">\r\n                {t('sharedExtra')}\r\n              </Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails className={classes.details}>\r\n              <SelectField\r\n                margin=\"normal\"\r\n                defaultValue={item.groupId}\r\n                onChange={event => setItem({...item, groupId: Number(event.target.value)})}\r\n                endpoint=\"/api/groups\"\r\n                label={t('groupParent')}\r\n                variant=\"filled\" />\r\n              <TextField\r\n                margin=\"normal\"\r\n                defaultValue={item.phone}\r\n                onChange={event => setItem({...item, phone: event.target.value})}\r\n                label={t('sharedPhone')}\r\n                variant=\"filled\" />\r\n              <TextField\r\n                margin=\"normal\"\r\n                defaultValue={item.model}\r\n                onChange={event => setItem({...item, model: event.target.value})}\r\n                label={t('deviceModel')}\r\n                variant=\"filled\" />\r\n              <TextField\r\n                margin=\"normal\"\r\n                defaultValue={item.contact}\r\n                onChange={event => setItem({...item, contact: event.target.value})}\r\n                label={t('deviceContact')}\r\n                variant=\"filled\" />\r\n              <SelectField\r\n                margin=\"normal\"\r\n                defaultValue={item.category}\r\n                onChange={event => setItem({...item, category: event.target.value})}\r\n                data={deviceCategories.map(category => ({\r\n                  id: category,\r\n                  name: t(`category${category.replace(/^\\w/, c => c.toUpperCase())}`)\r\n                }))}\r\n                label={t('deviceCategory')}\r\n                variant=\"filled\" />\r\n              <FormControlLabel\r\n                control={<Checkbox checked={item.disabled} onChange={event => setItem({...item, disabled: event.target.checked})} />}\r\n                label={t('sharedDisabled')} />\r\n            </AccordionDetails>\r\n          </Accordion>\r\n          <Accordion>\r\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n              <Typography variant=\"subtitle1\">\r\n                {t('sharedAttributes')}\r\n              </Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails className={classes.details}>\r\n              <EditAttributesView\r\n                attributes={item.attributes}\r\n                setAttributes={attributes => setItem({...item, attributes})}\r\n                definitions={deviceAttributes}\r\n                />\r\n            </AccordionDetails>\r\n          </Accordion>\r\n          {item.id &&\r\n            <Accordion>\r\n              <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n                <Typography variant=\"subtitle1\">\r\n                  {t('sharedConnections')}\r\n                </Typography>\r\n              </AccordionSummary>\r\n              <AccordionDetails className={classes.details}>\r\n                <LinkField\r\n                  margin=\"normal\"\r\n                  endpointAll=\"/api/geofences\"\r\n                  endpointLinked={\"/api/geofences?deviceId=\" + item.id}\r\n                  baseId={item.id}\r\n                  keyBase=\"deviceId\"\r\n                  keyLink=\"geofenceId\"\r\n                  label={t('sharedGeofences')}\r\n                  variant=\"filled\" />\r\n                <LinkField\r\n                  margin=\"normal\"\r\n                  endpointAll=\"/api/notifications\"\r\n                  endpointLinked={\"/api/notifications?deviceId=\" + item.id}\r\n                  baseId={item.id}\r\n                  keyBase=\"deviceId\"\r\n                  keyLink=\"notificationId\"\r\n                  titleGetter={it => t(prefixString('event', it.type))}\r\n                  label={t('sharedNotifications')}\r\n                  variant=\"filled\" />\r\n              </AccordionDetails>\r\n            </Accordion>\r\n          }\r\n        </>\r\n      }\r\n    </EditItemView>\r\n  );\r\n}\r\n\r\nexport default DevicePage;\r\n","import React, { useState } from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport t from './common/localization';\r\nimport userAttributes from './attributes/userAttributes';\r\nimport EditItemView from './EditItemView';\r\nimport { Accordion, AccordionSummary, AccordionDetails, makeStyles, Typography } from '@material-ui/core';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport EditAttributesView from './attributes/EditAttributesView';\r\nimport LinkField from './form/LinkField';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  details: {\r\n    flexDirection: 'column',\r\n  },\r\n}));\r\n\r\nconst UserPage = () => {\r\n  const classes = useStyles();\r\n\r\n  const [item, setItem] = useState();\r\n\r\n  return (\r\n    <EditItemView endpoint=\"users\" item={item} setItem={setItem}>\r\n      {item &&\r\n        <>\r\n          <Accordion defaultExpanded>\r\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n              <Typography variant=\"subtitle1\">\r\n                {t('sharedRequired')}\r\n              </Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails className={classes.details}>\r\n              <TextField\r\n                margin=\"normal\"\r\n                defaultValue={item.name}\r\n                onChange={event => setItem({...item, name: event.target.value})}\r\n                label={t('sharedName')}\r\n                variant=\"filled\" />\r\n              <TextField\r\n                margin=\"normal\"\r\n                defaultValue={item.email}\r\n                onChange={event => setItem({...item, email: event.target.value})}\r\n                label={t('userEmail')}\r\n                variant=\"filled\" />\r\n              <TextField\r\n                margin=\"normal\"\r\n                type=\"password\"\r\n                onChange={event => setItem({...item, password: event.target.value})}\r\n                label={t('userPassword')}\r\n                variant=\"filled\" />\r\n            </AccordionDetails>\r\n          </Accordion>\r\n          <Accordion>\r\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n              <Typography variant=\"subtitle1\">\r\n                {t('sharedAttributes')}\r\n              </Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails className={classes.details}>\r\n              <EditAttributesView\r\n                attributes={item.attributes}\r\n                setAttributes={attributes => setItem({...item, attributes})}\r\n                definitions={userAttributes}\r\n                />\r\n            </AccordionDetails>\r\n          </Accordion>\r\n          {item.id &&\r\n            <Accordion>\r\n              <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n                <Typography variant=\"subtitle1\">\r\n                  {t('sharedConnections')}\r\n                </Typography>\r\n              </AccordionSummary>\r\n              <AccordionDetails className={classes.details}>\r\n                <LinkField\r\n                  margin=\"normal\"\r\n                  endpointAll=\"/api/devices?all=true\"\r\n                  endpointLinked={\"/api/devices?userId=\" + item.id}\r\n                  baseId={item.id}\r\n                  keyBase=\"userId\"\r\n                  keyLink=\"deviceId\"\r\n                  label={t('deviceTitle')}\r\n                  variant=\"filled\" />\r\n                <LinkField\r\n                  margin=\"normal\"\r\n                  endpointAll=\"/api/groups?all=true\"\r\n                  endpointLinked={\"/api/groups?userId=\" + item.id}\r\n                  baseId={item.id}\r\n                  keyBase=\"userId\"\r\n                  keyLink=\"groupId\"\r\n                  label={t('settingsGroups')}\r\n                  variant=\"filled\" />\r\n              </AccordionDetails>\r\n            </Accordion>\r\n          }\r\n        </>\r\n      }\r\n    </EditItemView>\r\n  );\r\n}\r\n\r\nexport default UserPage;\r\n","import { useDispatch, useSelector } from 'react-redux';\r\nimport { connect } from 'react-redux';\r\nimport { positionsActions, devicesActions, sessionActions } from './store';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useEffectAsync } from './reactHelper';\r\n\r\nconst displayNotifications = events => {\r\n  if (\"Notification\" in window) {\r\n    if (Notification.permission === \"granted\") {\r\n      for (const event of events) {\r\n        const notification = new Notification(`Event: ${event.type}`);\r\n        setTimeout(notification.close.bind(notification), 4 * 1000);\r\n      }\r\n    } else if (Notification.permission !== \"denied\") {\r\n      Notification.requestPermission(permission => {\r\n        if (permission === \"granted\") {\r\n          displayNotifications(events);\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n\r\nconst SocketController = () => {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const authenticated = useSelector(state => !!state.session.user);\r\n\r\n  const connectSocket = () => {\r\n    const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\r\n    const socket = new WebSocket(protocol + '//' + window.location.host + '/api/socket');\r\n\r\n    socket.onclose = () => {\r\n      setTimeout(() => connectSocket(), 60 * 1000);\r\n    };\r\n\r\n    socket.onmessage = (event) => {\r\n      const data = JSON.parse(event.data);\r\n      if (data.devices) {\r\n        dispatch(devicesActions.update(data.devices));\r\n      }\r\n      if (data.positions) {\r\n        dispatch(positionsActions.update(data.positions));\r\n      }\r\n      if (data.events) {\r\n        displayNotifications(data.events);\r\n      }\r\n    };\r\n  }\r\n\r\n  useEffectAsync(async () => {\r\n    const response = await fetch('/api/server');\r\n    if (response.ok) {\r\n      dispatch(sessionActions.updateServer(await response.json()));\r\n    }\r\n  }, []);\r\n\r\n  useEffectAsync(async () => {\r\n    if (authenticated) {\r\n      const response = await fetch('/api/devices');\r\n      if (response.ok) {\r\n        dispatch(devicesActions.refresh(await response.json()));\r\n      }\r\n      connectSocket();\r\n    } else {\r\n      const response = await fetch('/api/session');\r\n      if (response.ok) {\r\n        dispatch(sessionActions.updateUser(await response.json()));\r\n      } else {\r\n        history.push('/login');\r\n      }\r\n    }\r\n  }, [authenticated]);\r\n\r\n  return null;\r\n}\r\n\r\nexport default connect()(SocketController);\r\n","import React, { useState } from 'react';\r\nimport MainToolbar from '../MainToolbar';\r\nimport { TableContainer, Table, TableRow, TableCell, TableHead, TableBody, makeStyles, IconButton } from '@material-ui/core';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport t from '../common/localization';\r\nimport { useEffectAsync } from '../reactHelper';\r\nimport EditCollectionView from '../EditCollectionView';\r\nimport { prefixString } from '../common/stringUtils';\r\nimport { formatBoolean } from '../common/formatter';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  columnAction: {\r\n    width: theme.spacing(1),\r\n    padding: theme.spacing(0, 1),\r\n  },\r\n}));\r\n\r\nconst NotificationsView = ({ updateTimestamp, onMenuClick }) => {\r\n  const classes = useStyles();\r\n\r\n  const [items, setItems] = useState([]);\r\n\r\n  useEffectAsync(async () => {\r\n    const response = await fetch('/api/notifications');\r\n    if (response.ok) {\r\n      setItems(await response.json());\r\n    }\r\n  }, [updateTimestamp]);\r\n\r\n  const formatList = (prefix, value) => {\r\n    if (value) {\r\n      return value\r\n        .split(/[, ]+/)\r\n        .filter(Boolean)\r\n        .map(it => t(prefixString(prefix, it)))\r\n        .join(', ');\r\n    }\r\n    return '';\r\n  };\r\n\r\n  return (\r\n    <TableContainer>\r\n    <Table>\r\n      <TableHead>\r\n        <TableRow>\r\n          <TableCell className={classes.columnAction} />\r\n          <TableCell>{t('notificationType')}</TableCell>\r\n          <TableCell>{t('notificationAlways')}</TableCell>\r\n          <TableCell>{t('sharedAlarms')}</TableCell>\r\n          <TableCell>{t('notificationNotificators')}</TableCell>\r\n        </TableRow>\r\n      </TableHead>\r\n      <TableBody>\r\n        {items.map(item => (\r\n          <TableRow key={item.id}>\r\n            <TableCell className={classes.columnAction} padding=\"none\">\r\n              <IconButton onClick={(event) => onMenuClick(event.currentTarget, item.id)}>\r\n                <MoreVertIcon />\r\n              </IconButton>\r\n            </TableCell>\r\n            <TableCell>{t(prefixString('event', item.type))}</TableCell>\r\n            <TableCell>{formatBoolean(item.always)}</TableCell>\r\n            <TableCell>{formatList('alarm', item.attributes.alarms)}</TableCell>\r\n            <TableCell>{formatList('notificator', item.notificators)}</TableCell>\r\n          </TableRow>\r\n        ))}\r\n      </TableBody>\r\n    </Table>\r\n    </TableContainer>\r\n  );\r\n}\r\n\r\nconst NotificationsPage = () => {\r\n  return (\r\n    <>\r\n      <MainToolbar />\r\n      <EditCollectionView content={NotificationsView} editPath=\"/settings/notification\" endpoint=\"notifications\" />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default NotificationsPage;\r\n","import React, { useState } from 'react';\r\n\r\nimport t, { findStringKeys } from '../common/localization';\r\nimport EditItemView from '../EditItemView';\r\nimport { Accordion, AccordionSummary, AccordionDetails, makeStyles, Typography, FormControlLabel, Checkbox } from '@material-ui/core';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport { prefixString, unprefixString } from '../common/stringUtils';\r\nimport SelectField from '../form/SelectField';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  details: {\r\n    flexDirection: 'column',\r\n  },\r\n}));\r\n\r\nconst NotificationPage = () => {\r\n  const classes = useStyles();\r\n\r\n  const [item, setItem] = useState();\r\n\r\n  const alarms = findStringKeys(it => it.startsWith('alarm')).map(it => ({\r\n    key: unprefixString('alarm', it),\r\n    name: t(it),\r\n  }));\r\n\r\n  return (\r\n    <EditItemView endpoint=\"notifications\" item={item} setItem={setItem}>\r\n      {item &&\r\n        <>\r\n          <Accordion defaultExpanded>\r\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n              <Typography variant=\"subtitle1\">\r\n                {t('sharedRequired')}\r\n              </Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails className={classes.details}>\r\n              <SelectField\r\n                margin=\"normal\"\r\n                defaultValue={item.type}\r\n                onChange={e => setItem({...item, type: e.target.value})}\r\n                endpoint=\"/api/notifications/types\"\r\n                keyGetter={it => it.type}\r\n                titleGetter={it => t(prefixString('event', it.type))}\r\n                label={t('sharedType')}\r\n                variant=\"filled\" />\r\n              <SelectField\r\n                multiple\r\n                margin=\"normal\"\r\n                defaultValue={item.notificators ? item.notificators.split(/[, ]+/) : []}\r\n                onChange={e => setItem({...item, notificators: e.target.value.join()})}\r\n                endpoint=\"/api/notifications/notificators\"\r\n                keyGetter={it => it.type}\r\n                titleGetter={it => t(prefixString('notificator', it.type))}\r\n                label={t('notificationNotificators')}\r\n                variant=\"filled\" />\r\n              {item.type === 'alarm' &&\r\n                <SelectField\r\n                  multiple\r\n                  margin=\"normal\"\r\n                  defaultValue={item.attributes && item.attributes.alarms ? item.attributes.alarms.split(/[, ]+/) : []}\r\n                  onChange={e => setItem({...item, attributes: {...item.attributes, alarms: e.target.value.join()}})}\r\n                  data={alarms}\r\n                  keyGetter={it => it.key}\r\n                  label={t('sharedAlarms')}\r\n                  variant=\"filled\" />\r\n              }\r\n              <FormControlLabel\r\n                control={\r\n                  <Checkbox\r\n                    checked={item.always}\r\n                    onChange={event => setItem({...item, always: event.target.checked})}\r\n                    />\r\n                }\r\n                label={t('notificationAlways')} />\r\n            </AccordionDetails>\r\n          </Accordion>\r\n        </>\r\n      }\r\n    </EditItemView>\r\n  );\r\n}\r\n\r\nexport default NotificationPage;\r\n","import React, { useState } from 'react';\r\nimport MainToolbar from '../MainToolbar';\r\nimport { TableContainer, Table, TableRow, TableCell, TableHead, TableBody, makeStyles, IconButton } from '@material-ui/core';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport t from '../common/localization';\r\nimport { useEffectAsync } from '../reactHelper';\r\nimport EditCollectionView from '../EditCollectionView';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  columnAction: {\r\n    width: theme.spacing(1),\r\n    padding: theme.spacing(0, 1),\r\n  },\r\n}));\r\n\r\nconst GroupsView = ({ updateTimestamp, onMenuClick }) => {\r\n  const classes = useStyles();\r\n\r\n  const [items, setItems] = useState([]);\r\n\r\n  useEffectAsync(async () => {\r\n    const response = await fetch('/api/groups');\r\n    if (response.ok) {\r\n      setItems(await response.json());\r\n    }\r\n  }, [updateTimestamp]);\r\n\r\n  return (\r\n    <TableContainer>\r\n    <Table>\r\n      <TableHead>\r\n        <TableRow>\r\n          <TableCell className={classes.columnAction} />\r\n          <TableCell>{t('sharedName')}</TableCell>\r\n        </TableRow>\r\n      </TableHead>\r\n      <TableBody>\r\n        {items.map((item) => (\r\n          <TableRow key={item.id}>\r\n            <TableCell className={classes.columnAction} padding=\"none\">\r\n              <IconButton onClick={(event) => onMenuClick(event.currentTarget, item.id)}>\r\n                <MoreVertIcon />\r\n              </IconButton>\r\n            </TableCell>\r\n            <TableCell>{item.name}</TableCell>\r\n          </TableRow>\r\n        ))}\r\n      </TableBody>\r\n    </Table>\r\n    </TableContainer>\r\n  );\r\n}\r\n\r\nconst GroupsPage = () => {\r\n  return (\r\n    <>\r\n      <MainToolbar />\r\n      <EditCollectionView content={GroupsView} editPath=\"/settings/group\" endpoint=\"groups\" />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default GroupsPage;\r\n","import React, { useState } from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport t from '../common/localization';\r\nimport EditItemView from '../EditItemView';\r\nimport { Accordion, AccordionSummary, AccordionDetails, makeStyles, Typography } from '@material-ui/core';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport EditAttributesView from '../attributes/EditAttributesView';\r\nimport deviceAttributes from '../attributes/deviceAttributes';\r\nimport SelectField from '../form/SelectField';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  details: {\r\n    flexDirection: 'column',\r\n  },\r\n}));\r\n\r\nconst GroupPage = () => {\r\n  const classes = useStyles();\r\n\r\n  const [item, setItem] = useState();\r\n\r\n  return (\r\n    <EditItemView endpoint=\"groups\" item={item} setItem={setItem}>\r\n      {item &&\r\n        <>\r\n          <Accordion defaultExpanded>\r\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n              <Typography variant=\"subtitle1\">\r\n                {t('sharedRequired')}\r\n              </Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails className={classes.details}>\r\n              <TextField\r\n                margin=\"normal\"\r\n                defaultValue={item.name}\r\n                onChange={event => setItem({...item, name: event.target.value})}\r\n                label={t('sharedName')}\r\n                variant=\"filled\" />\r\n            </AccordionDetails>\r\n          </Accordion>\r\n          <Accordion>\r\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n              <Typography variant=\"subtitle1\">\r\n                {t('sharedExtra')}\r\n              </Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails className={classes.details}>\r\n              <SelectField\r\n                margin=\"normal\"\r\n                defaultValue={item.groupId}\r\n                onChange={event => setItem({...item, groupId: Number(event.target.value)})}\r\n                endpoint=\"/api/groups\"\r\n                label={t('groupParent')}\r\n                variant=\"filled\" />\r\n            </AccordionDetails>\r\n          </Accordion>\r\n          <Accordion>\r\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n              <Typography variant=\"subtitle1\">\r\n                {t('sharedAttributes')}\r\n              </Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails className={classes.details}>\r\n              <EditAttributesView\r\n                attributes={item.attributes}\r\n                setAttributes={attributes => setItem({...item, attributes})}\r\n                definitions={deviceAttributes}\r\n                />\r\n            </AccordionDetails>\r\n          </Accordion>\r\n        </>\r\n      }\r\n    </EditItemView>\r\n  );\r\n}\r\n\r\nexport default GroupPage;\r\n","import React, { Fragment, useState } from 'react';\r\n\r\nimport t from './common/localization';\r\nimport { makeStyles, Typography, ListItem, ListItemText, ListItemSecondaryAction, List, Container, Paper, Divider } from '@material-ui/core';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useEffectAsync } from './reactHelper';\r\nimport MainToolbar from './MainToolbar';\r\nimport { formatPosition } from './common/formatter';\r\nimport { prefixString } from './common/stringUtils';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    marginTop: theme.spacing(2),\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst PositionPage = () => {\r\n  const classes = useStyles();\r\n\r\n  const { id } = useParams();\r\n\r\n  const [item, setItem] = useState();\r\n\r\n  useEffectAsync(async () => {\r\n    if (id) {\r\n      const response = await fetch(`/api/positions?id=${id}`, {\r\n        headers: {\r\n          'Accept': 'application/json'\r\n        },\r\n      });\r\n      if (response.ok) {\r\n        const items = await response.json();\r\n        setItem(items[0]);\r\n      }\r\n    } else {\r\n      setItem({});\r\n    }\r\n  }, [id]);\r\n\r\n  const formatKey = (key) => {\r\n    return t(prefixString('position', key)) || `${t('sharedAttribute')} \"${key}\"`;\r\n  };\r\n\r\n  const attributesList = () => {\r\n    const combinedList = {...item, ...item.attributes};\r\n    return Object.entries(combinedList).filter(([_, value]) => typeof value !== 'object');\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <MainToolbar />\r\n      <Container maxWidth='sm' className={classes.root}>\r\n        <Paper>\r\n          {item &&\r\n            <List>\r\n              {attributesList().map(([key, value], index, list) => (\r\n                <Fragment key={key}>\r\n                  <ListItem>\r\n                    <ListItemText\r\n                      primary={formatKey(key)}\r\n                      />\r\n                    <ListItemSecondaryAction>\r\n                      <Typography variant=\"body2\">\r\n                        {formatPosition(value, key)}\r\n                      </Typography>\r\n                    </ListItemSecondaryAction>\r\n                  </ListItem>\r\n                  {index < list.length - 1 ? <Divider /> : null}\r\n                </Fragment>\r\n              ))}\r\n            </List>\r\n          }\r\n        </Paper>\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default PositionPage;\r\n","import React, { useState } from 'react';\r\nimport { TableContainer, Table, TableRow, TableCell, TableHead, TableBody, Paper } from '@material-ui/core';\r\nimport { FormControl, InputLabel, Select, MenuItem } from '@material-ui/core';\r\nimport t from '../common/localization';\r\nimport { formatPosition } from '../common/formatter';\r\nimport ReportFilter from './ReportFilter';\r\nimport ReportLayoutPage from './ReportLayoutPage';\r\n\r\nconst ReportFilterForm = ({ setItems }) => {\r\n\r\n  const [eventTypes, setEventTypes] = useState(['allEvents']);\r\n\r\n  const handleSubmit = async (deviceId, from, to, mail, headers) => {\r\n    const query = new URLSearchParams({ deviceId, from, to, mail });\r\n    eventTypes.forEach(it => query.append('type', it));\r\n    const response = await fetch(`/api/reports/events?${query.toString()}`, { headers });\r\n    if (response.ok) {\r\n      const contentType = response.headers.get('content-type');\r\n      if (contentType) {\r\n        if (contentType === 'application/json') {\r\n          setItems(await response.json());\r\n        } else {\r\n          window.location.assign(window.URL.createObjectURL(await response.blob()));\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ReportFilter handleSubmit={handleSubmit}>\r\n      <FormControl variant=\"filled\" margin=\"normal\" fullWidth>\r\n        <InputLabel>{t('reportEventTypes')}</InputLabel>\r\n        <Select value={eventTypes} onChange={e => setEventTypes(e.target.value)} multiple>\r\n          <MenuItem value=\"allEvents\">{t('eventAll')}</MenuItem>\r\n          <MenuItem value=\"deviceOnline\">{t('eventDeviceOnline')}</MenuItem>\r\n          <MenuItem value=\"deviceUnknown\">{t('eventDeviceUnknown')}</MenuItem>\r\n          <MenuItem value=\"deviceOffline\">{t('eventDeviceOffline')}</MenuItem>\r\n          <MenuItem value=\"deviceInactive\">{t('eventDeviceInactive')}</MenuItem>\r\n          <MenuItem value=\"deviceMoving\">{t('eventDeviceMoving')}</MenuItem>\r\n          <MenuItem value=\"deviceStopped\">{t('eventDeviceStopped')}</MenuItem>\r\n          <MenuItem value=\"deviceOverspeed\">{t('eventDeviceOverspeed')}</MenuItem>\r\n          <MenuItem value=\"deviceFuelDrop\">{t('eventDeviceFuelDrop')}</MenuItem>\r\n          <MenuItem value=\"commandResult\">{t('eventCommandResult')}</MenuItem>\r\n          <MenuItem value=\"geofenceEnter\">{t('eventGeofenceEnter')}</MenuItem>\r\n          <MenuItem value=\"geofenceExit\">{t('eventGeofenceExit')}</MenuItem>\r\n          <MenuItem value=\"alarm\">{t('eventAlarm')}</MenuItem>\r\n          <MenuItem value=\"ignitionOn\">{t('eventIgnitionOn')}</MenuItem>\r\n          <MenuItem value=\"ignitionOff\">{t('eventIgnitionOff')}</MenuItem>\r\n          <MenuItem value=\"maintenance\">{t('eventMaintenance')}</MenuItem>\r\n          <MenuItem value=\"textMessage\">{t('eventTextMessage')}</MenuItem>\r\n          <MenuItem value=\"driverChanged\">{t('eventDriverChanged')}</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n    </ReportFilter>\r\n  );\r\n}\r\n\r\nconst EventReportPage = () => {\r\n\r\n  const [items, setItems] = useState([]);\r\n\r\n  return (\r\n    <ReportLayoutPage reportFilterForm={ReportFilterForm} setItems={setItems}>\r\n      <TableContainer component={Paper}>\r\n        <Table>\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>{t('positionFixTime')}</TableCell>\r\n              <TableCell>{t('sharedType')}</TableCell>\r\n              <TableCell>{t('sharedGeofence')}</TableCell>\r\n              <TableCell>{t('sharedMaintenance')}</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {items.map(item => (\r\n              <TableRow key={item.id}>\r\n                <TableCell>{formatPosition(item, 'serverTime')}</TableCell>\r\n                <TableCell>{item.type}</TableCell>\r\n                <TableCell>{}</TableCell>\r\n                <TableCell>{}</TableCell>\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </ReportLayoutPage>\r\n  );\r\n}\r\n\r\nexport default EventReportPage;\r\n","import mapboxgl from 'mapbox-gl';\r\nimport { useEffect } from 'react';\r\nimport { map } from './Map';\r\n\r\nconst ReplayPathMap = ({ positions }) => {\r\n  const id = 'replay';\r\n\r\n  useEffect(() => {\r\n    try {\r\n      map.addSource(id, {\r\n        'type': 'geojson',\r\n        'data': {\r\n          type: 'Feature',\r\n          geometry: {\r\n            type: 'LineString',\r\n            coordinates: [],\r\n          },\r\n        },\r\n      });\r\n    } catch(e) {}\r\n\r\n    map.addLayer({\r\n      'source': id,\r\n      'id': id,\r\n      'type': 'line',\r\n      'layout': {\r\n        'line-join': 'round',\r\n        'line-cap': 'round',\r\n      },\r\n      'paint': {\r\n         'line-color': '#333',\r\n         'line-width': 5,\r\n      },\r\n    });\r\n\r\n    return () => {\r\n      map.removeLayer(id);\r\n      try {map.removeSource(id);} catch(e) {}\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const coordinates = positions.map(item => [item.longitude, item.latitude]);\r\n    map.getSource(id).setData({\r\n      type: 'Feature',\r\n      geometry: {\r\n        type: 'LineString',\r\n        coordinates: coordinates,\r\n      },\r\n    });\r\n    if (coordinates.length) {\r\n      const bounds = coordinates.reduce((bounds, item) => bounds.extend(item), new mapboxgl.LngLatBounds(coordinates[0], coordinates[0]));\r\n      map.fitBounds(bounds, {\r\n        padding: { top: 50, bottom: 250, left: 25, right: 25 },\r\n      });\r\n    }\r\n  }, [positions]);\r\n\r\n  return null;\r\n}\r\n\r\nexport default ReplayPathMap;\r\n","import React, { useState } from 'react';\r\nimport { Accordion, AccordionDetails, AccordionSummary, Container, makeStyles, Paper, Slider, Tooltip, Typography } from '@material-ui/core';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport MainToolbar from '../MainToolbar';\r\nimport Map from '../map/Map';\r\nimport t from '../common/localization';\r\nimport ReplayPathMap from '../map/ReplayPathMap';\r\nimport PositionsMap from '../map/PositionsMap';\r\nimport { formatPosition } from '../common/formatter';\r\nimport ReportFilter from './ReportFilter';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    height: '100%',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n  },\r\n  controlPanel: {\r\n    position: 'absolute',\r\n    bottom: theme.spacing(5),\r\n    left: '50%',\r\n    transform: 'translateX(-50%)',\r\n  },\r\n  controlContent: {\r\n    padding: theme.spacing(2),\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  configForm: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n  },\r\n}));\r\n\r\nconst TimeLabel = ({ children, open, value }) => {\r\n  return (\r\n    <Tooltip open={open} enterTouchDelay={0} placement=\"top\" title={value}>\r\n      {children}\r\n    </Tooltip>\r\n  );\r\n};\r\n\r\nconst ReplayPage = () => {\r\n  const classes = useStyles();\r\n\r\n  const [expanded, setExpanded] = useState(true);\r\n  const [positions, setPositions] = useState([]);\r\n  const [index, setIndex] = useState(0);\r\n\r\n  const handleSubmit = async (deviceId, from, to, _, headers) => {\r\n    const query = new URLSearchParams({ deviceId, from, to });\r\n    const response = await fetch(`/api/positions?${query.toString()}`, { headers });\r\n    if (response.ok) {\r\n      setIndex(0);\r\n      setPositions(await response.json());\r\n      setExpanded(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <MainToolbar />\r\n      <Map>\r\n        <ReplayPathMap positions={positions} />\r\n        {index < positions.length &&\r\n          <PositionsMap positions={[positions[index]]} />\r\n        }\r\n      </Map>\r\n      <Container maxWidth=\"sm\" className={classes.controlPanel}>\r\n        {!!positions.length &&\r\n          <Paper className={classes.controlContent}>\r\n            <Slider\r\n              max={positions.length - 1}\r\n              step={null}\r\n              marks={positions.map((_, index) => ({ value: index }))}\r\n              value={index}\r\n              onChange={(_, index) => setIndex(index)}\r\n              valueLabelDisplay=\"auto\"\r\n              valueLabelFormat={i => i < positions.length ? formatPosition(positions[i], 'fixTime') : ''}\r\n              ValueLabelComponent={TimeLabel}\r\n              />\r\n          </Paper>\r\n        }\r\n        <div>\r\n          <Accordion expanded={expanded} onChange={() => setExpanded(!expanded)}>\r\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n              <Typography align='center'>\r\n                {t('reportConfigure')}\r\n              </Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails className={classes.configForm}>\r\n              <ReportFilter handleSubmit={handleSubmit} showOnly />\r\n            </AccordionDetails>\r\n          </Accordion>\r\n        </div>\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ReplayPage;\r\n","import React, { useState } from 'react';\r\nimport { TableContainer, Table, TableRow, TableCell, TableHead, TableBody, Paper } from '@material-ui/core';\r\nimport t from '../common/localization';\r\nimport { formatDistance, formatSpeed, formatHours, formatDate } from '../common/formatter';\r\nimport ReportFilter from './ReportFilter';\r\nimport ReportLayoutPage from './ReportLayoutPage';\r\nimport { useAttributePreference } from '../common/preferences';\r\n\r\nconst ReportFilterForm = ({ setItems }) => {\r\n\r\n  const handleSubmit = async (deviceId, from, to, mail, headers) => {\r\n    const query = new URLSearchParams({ deviceId, from, to, mail });\r\n    const response = await fetch(`/api/reports/trips?${query.toString()}`, { headers });\r\n    if (response.ok) {\r\n      const contentType = response.headers.get('content-type');\r\n      if (contentType) {\r\n        if (contentType === 'application/json') {\r\n          setItems(await response.json());\r\n        } else {\r\n          window.location.assign(window.URL.createObjectURL(await response.blob()));\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return <ReportFilter handleSubmit={handleSubmit} />;\r\n}\r\n\r\nconst TripReportPage = () => {\r\n  \r\n  const distanceUnit = useAttributePreference('distanceUnit');\r\n  const speedUnit = useAttributePreference('speedUnit');\r\n  const [items, setItems] = useState([]);\r\n\r\n  return (\r\n    <ReportLayoutPage reportFilterForm={ReportFilterForm} setItems={setItems}>\r\n      <TableContainer component={Paper}>\r\n        <Table>\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>{t('reportStartTime')}</TableCell>\r\n              <TableCell>{t('reportStartOdometer')}</TableCell>\r\n              <TableCell>{t('reportEndTime')}</TableCell>\r\n              <TableCell>{t('reportEndOdometer')}</TableCell>\r\n              <TableCell>{t('sharedDistance')}</TableCell>\r\n              <TableCell>{t('reportAverageSpeed')}</TableCell>\r\n              <TableCell>{t('reportMaximumSpeed')}</TableCell>\r\n              <TableCell>{t('reportDuration')}</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {items.map((item) => (\r\n              <TableRow key={item.id}>\r\n                <TableCell>{formatDate(item.startTime)}</TableCell>\r\n                <TableCell>{formatDistance(item.startOdometer, distanceUnit)}</TableCell>\r\n                <TableCell>{formatDate(item.endTime)}</TableCell>\r\n                <TableCell>{formatDistance(item.endOdometer, distanceUnit)}</TableCell>\r\n                <TableCell>{formatDistance(item.distance, distanceUnit)}</TableCell>\r\n                <TableCell>{formatSpeed(item.averageSpeed, speedUnit)}</TableCell>\r\n                <TableCell>{formatSpeed(item.maxSpeed, speedUnit)}</TableCell>\r\n                <TableCell>{formatHours(item.duration)}</TableCell>                             \r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </ReportLayoutPage>\r\n  );\r\n}\r\n\r\nexport default TripReportPage;\r\n","import React, { useState } from 'react';\r\nimport { TableContainer, Table, TableRow, TableCell, TableHead, TableBody, Paper } from '@material-ui/core';\r\nimport t from '../common/localization';\r\nimport { formatDistance, formatHours, formatDate, formatVolume } from '../common/formatter';\r\nimport ReportFilter from './ReportFilter';\r\nimport ReportLayoutPage from './ReportLayoutPage';\r\nimport { useAttributePreference } from '../common/preferences';\r\n\r\nconst ReportFilterForm = ({ setItems }) => {\r\n\r\n  const handleSubmit = async (deviceId, from, to, mail, headers) => {\r\n    const query = new URLSearchParams({ deviceId, from, to, mail });\r\n    const response = await fetch(`/api/reports/stops?${query.toString()}`, { headers });\r\n    if (response.ok) {\r\n      const contentType = response.headers.get('content-type');\r\n      if (contentType) {\r\n        if (contentType === 'application/json') {\r\n          setItems(await response.json());\r\n        } else {\r\n          window.location.assign(window.URL.createObjectURL(await response.blob()));\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return <ReportFilter handleSubmit={handleSubmit} />;\r\n};\r\n\r\nconst StopReportPage = () => {\r\n\r\n  const distanceUnit = useAttributePreference('distanceUnit');\r\n  const [items, setItems] = useState([]);\r\n  \r\n  return (\r\n    <ReportLayoutPage reportFilterForm={ReportFilterForm} setItems={setItems}>\r\n      <TableContainer component={Paper}>\r\n        <Table>\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>{t('reportStartTime')}</TableCell>\r\n              <TableCell>{t('positionOdometer')}</TableCell>\r\n              <TableCell>{t('reportEndTime')}</TableCell>\r\n              <TableCell>{t('reportDuration')}</TableCell>\r\n              <TableCell>{t('reportEngineHours')}</TableCell>\r\n              <TableCell>{t('reportSpentFuel')}</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {items.map((item) => (\r\n              <TableRow key={item.id}>\r\n                <TableCell>{formatDate(item.startTime)}</TableCell>\r\n                <TableCell>{formatDistance(item.startOdometer, distanceUnit)}</TableCell>\r\n                <TableCell>{formatDate(item.endTime)}</TableCell>\r\n                <TableCell>{formatHours(item.duration)}</TableCell>\r\n                <TableCell>{formatHours(item.engineHours)}</TableCell>\r\n                <TableCell>{formatVolume(item.spentFuel)}</TableCell>\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </ReportLayoutPage>\r\n  );\r\n};\r\n\r\nexport default StopReportPage;\r\n","import React, { useState } from 'react';\r\nimport { TableContainer, Table, TableRow, TableCell, TableHead, TableBody, Paper, FormControlLabel, Checkbox } from '@material-ui/core';\r\nimport t from '../common/localization';\r\nimport { formatDistance, formatHours, formatDate, formatSpeed, formatVolume } from '../common/formatter';\r\nimport ReportFilter from './ReportFilter';\r\nimport ReportLayoutPage from './ReportLayoutPage';\r\nimport { useAttributePreference } from '../common/preferences';\r\n\r\nconst ReportFilterForm = ({ setItems }) => {\r\n\r\n  const [daily, setDaily] = useState(false);\r\n\r\n  const handleSubmit = async (deviceId, from, to, mail, headers) => {\r\n    const query = new URLSearchParams({ deviceId, from, to, daily, mail });\r\n    const response = await fetch(`/api/reports/summary?${query.toString()}`, { headers });\r\n    if (response.ok) {\r\n      const contentType = response.headers.get('content-type');\r\n      if (contentType) {\r\n        if (contentType === 'application/json') {\r\n          setItems(await response.json());\r\n        } else {\r\n          window.location.assign(window.URL.createObjectURL(await response.blob()));\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <ReportFilter handleSubmit={handleSubmit}>\r\n      <FormControlLabel\r\n        control={<Checkbox checked={daily} onChange={e => setDaily(e.target.checked)} />}\r\n        label={t('reportDaily')} />\r\n    </ReportFilter>\r\n  );\r\n}\r\n\r\nconst SummaryReportPage = () => {\r\n\r\n  const distanceUnit = useAttributePreference('distanceUnit');\r\n  const speedUnit = useAttributePreference('speedUnit');\r\n  const [items, setItems] = useState([]);\r\n  \r\n  return (\r\n    <ReportLayoutPage reportFilterForm={ReportFilterForm} setItems={setItems}>\r\n      <TableContainer component={Paper}>\r\n        <Table>\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>{t('reportStartDate')}</TableCell>\r\n              <TableCell>{t('sharedDistance')}</TableCell>\r\n              <TableCell>{t('reportStartOdometer')}</TableCell>\r\n              <TableCell>{t('reportEndOdometer')}</TableCell>\r\n              <TableCell>{t('reportAverageSpeed')}</TableCell>\r\n              <TableCell>{t('reportMaximumSpeed')}</TableCell>\r\n              <TableCell>{t('reportEngineHours')}</TableCell>              \r\n              <TableCell>{t('reportSpentFuel')}</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {items.map((item) => (\r\n              <TableRow key={item.id}>\r\n                <TableCell>{formatDate(item.startTime, 'YYYY-MM-DD')}</TableCell>\r\n                <TableCell>{formatDistance(item.distance, distanceUnit)}</TableCell>\r\n                <TableCell>{formatDistance(item.startOdometer, distanceUnit)}</TableCell>\r\n                <TableCell>{formatDistance(item.endOdometer, distanceUnit)}</TableCell>\r\n                <TableCell>{formatSpeed(item.averageSpeed, speedUnit)}</TableCell>\r\n                <TableCell>{formatSpeed(item.maxSpeed, speedUnit)}</TableCell>\r\n                <TableCell>{formatHours(item.engineHours)}</TableCell>\r\n                <TableCell>{formatVolume(item.spentFuel)}</TableCell>\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </ReportLayoutPage>\r\n  );\r\n}\r\n\r\nexport default SummaryReportPage;\r\n","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom'\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport MainPage from './MainPage';\r\nimport LoginPage from './LoginPage';\r\nimport RegisterPage from './RegisterPage';\r\nimport RouteReportPage from './reports/RouteReportPage';\r\nimport ServerPage from './admin/ServerPage';\r\nimport UsersPage from './admin/UsersPage';\r\nimport DevicePage from './DevicePage';\r\nimport UserPage from './UserPage';\r\nimport SocketController from './SocketController';\r\nimport NotificationsPage from './settings/NotificationsPage';\r\nimport NotificationPage from './settings/NotificationPage';\r\nimport GroupsPage from './settings/GroupsPage';\r\nimport GroupPage from './settings/GroupPage';\r\nimport PositionPage from './PositionPage';\r\nimport EventReportPage from './reports/EventReportPage';\r\nimport ReplayPage from './reports/ReplayPage';\r\nimport { useSelector } from 'react-redux';\r\nimport { LinearProgress } from '@material-ui/core';\r\nimport TripReportPage from './reports/TripReportPage';\r\nimport StopReportPage from './reports/StopReportPage';\r\nimport SummaryReportPage from './reports/SummaryReportPage';\r\n\r\nconst App = () => {\r\n  const initialized = useSelector(state => !!state.session.server && !!state.session.user);\r\n\r\n  return (\r\n    <>\r\n      <CssBaseline />\r\n      <SocketController />\r\n      <Switch>\r\n        <Route exact path='/login' component={LoginPage} />\r\n        <Route exact path='/register' component={RegisterPage} />\r\n        <Route>\r\n          {!initialized ? (<LinearProgress />) : (\r\n            <Switch>\r\n              <Route exact path='/' component={MainPage} />\r\n              <Route exact path='/replay' component={ReplayPage} />\r\n              <Route exact path='/position/:id?' component={PositionPage} />\r\n              <Route exact path='/user/:id?' component={UserPage} />\r\n              <Route exact path='/device/:id?' component={DevicePage} />\r\n              <Route exact path='/reports/route' component={RouteReportPage} />\r\n              <Route exact path='/settings/notifications' component={NotificationsPage} />\r\n              <Route exact path='/settings/notification/:id?' component={NotificationPage} />\r\n              <Route exact path='/settings/groups' component={GroupsPage} />\r\n              <Route exact path='/settings/group/:id?' component={GroupPage} />\r\n              <Route exact path='/admin/server' component={ServerPage} />\r\n              <Route exact path='/admin/users' component={UsersPage} />\r\n              <Route exact path='/reports/event' component={EventReportPage} />\r\n              <Route exact path='/reports/trip' component={TripReportPage} />\r\n              <Route exact path='/reports/stop' component={StopReportPage} />\r\n              <Route exact path='/reports/summary' component={SummaryReportPage} />\r\n            </Switch>\r\n          )}\r\n        </Route>\r\n      </Switch>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}","import 'typeface-roboto'\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { HashRouter } from 'react-router-dom'\r\nimport { Provider } from 'react-redux';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport store from './store';\r\n\r\nReactDOM.render((\r\n  <Provider store={store}>\r\n    <HashRouter>\r\n      <App />\r\n    </HashRouter>\r\n  </Provider>\r\n), document.getElementById('root'));\r\n\r\nserviceWorker.register();\r\n"],"sourceRoot":""}